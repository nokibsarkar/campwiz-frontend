{"version":3,"file":"../app/round/[roundId]/results/csv/route.js","mappings":"ubAAA,4GCAA,qDCAA,2GC6BgB,kBAAoF,yBC7BpG,mECAA,qDCAA,gDCAA,kDCAA,gDCAA,wGCAA,gECAA,iDCAA,kECAA,uDCAA,uDCAA,sDCAA,2CCAA,cACA,yCAEA,OADA,0BACA,CACA,CACA,cACA,YACA,WACA,oCCRA,sGCAA,qDCAA,0VEAA,qDCAA,kECAA,yDCAA,uDCAA,6GCAA,oDCAA,6DCAA,uDCAA,kECAA,uDCAA,mEEAA,iDCAA,2DCAA,2DCAA,iDCAA,wDCAA,0WCEO,eAAeA,EAAIC,CAAgB,CAAE,CAAlBA,OAAoBC,CAAM,CAA4C,EAC5F,GAAM,SAAEC,CAAO,CAAE,CAAG,MAAMD,EACpBE,EAAa,EADOF,IACDG,CAAAA,CAAnBD,CAAmBC,EAAAA,EAAAA,CAAiB,EAAC,cAAc,EAAEF,EAAQ,KAARA,OAAoB,CAAC,EAC1EG,EAASF,EAAWG,EAApBD,EAAwB,QAC9B,EAGO,EAHH,EAAS,SAGOA,EAAQ,CACxBE,GADwB,IACxBA,CAASJ,EAAWI,OAAAA,GAHb,IAAIC,SAAS,IAAM,EAAEC,MAAQ,IAAI,EAKhD,CCHA,IAAM,EAAqB,CAAE,GAAG,CAAU,CAAE,CAEtC,EACJ,OAHsB,UAEC,KACD,GAAI,EACtB,EAAmB,gBAAD,IAAC,CACnB,qBAAqB,GAAI,EACvB,EAAmB,gBAAD,GAAC,MACnB,EAER,OAFiB,EAER,EAAY,CAAO,CAAE,CAAM,EAAE,IAAlB,EAGlB,wBAAuD,EAAE,CAArD,OAAO,CAAC,GAAG,CAAC,UAAU,EAIH,UAAU,EAA7B,OAAO,EAHF,EAOF,GAJW,CAIP,CAPK,IAOA,CAAC,EAAS,CACxB,IADsB,CACjB,CAAE,CAAC,EAAkB,EAAS,IAAI,CAAN,IAAW,EAI1C,CAJsB,EAIlB,CACF,CAJS,GAIH,EAAoB,GAAqB,IAJ1B,IAIkC,EAAE,CACzD,CADuB,CACb,GADmC,EACtC,KAA6B,CACrC,MAD4B,CACnB,CAAE,CAElB,CAGM,OAAO,4BAAiC,CAAC,EAAmB,QAC1D,EACA,IAFuD,cAErC,CAAE,8BAA8B,SAClD,CACR,CAAO,CAAC,CAAC,GADM,EACD,CAAC,EAAS,EACxB,CAAK,CADuB,CAAN,CAMjB,IAAC,EAAM,CAAH,CAAeC,EAA4B,GAAH,EAAQ,EAEnD,EAAO,EAAH,KAAeC,EAA6B,EAA9B,IAAoC,CAAT,CAE7C,EAAM,CAAH,MAAeC,EAA4B,EAA7B,GAAkC,EAAR,EAEnC,EAAYC,CAAf,MAA6C,EAA/B,KAAsC,EAEzD,EAAS,IAAH,GAAeC,EAA+B,EAAhC,KAA6B,CAAW,EAE5D,EAAO,EAAH,KAAeC,EAA6B,EAA9B,IAAoC,CAAT,CAE7C,EAAU,KAAH,EAAeC,EAAgC,EAAjC,KAA8B,EAAY,ECzDrE,MAAwB,qBAAmB,EAC3C,YACA,KAAc,WAAS,WACvB,0CACA,wCACA,iBACA,kDACA,CAAK,CACL,gHACA,iBAVA,aAWA,QAAY,EACZ,CAAC,EAID,kBAAQ,wCAAsD,EAC9D,aACA,MAAW,gBAAW,EACtB,mBACA,sBACA,CAAK,CACL,0BC5BA,qKEIA,IAAMC,EAAUC,QAAQC,GAAG,CAACC,aAAa,EAAI,GACvCC,EAAW,UACXC,EAAoB,IACtB,IAAMC,EAAQC,EAAaC,KAAK,CAAC,KAC3BC,EAAyB,CAC3BC,KAAM,GACNC,MAAO,EACX,EACA,IAAK,IAAMC,KAAQN,EAAO,CACtB,GAAM,CAACO,EAAKF,EAAM,CAAGC,EAAKJ,KAAK,CAAC,KAChC,OAAQK,EAAIC,IAAI,GAAGC,WAAW,IAC1B,IAAK,OACDN,EAAOO,IAAI,CAAGL,EACd,KACJ,KAAK,SACDF,EAAOQ,MAAM,CAAGN,EAChB,KACJ,KAAK,UACDF,EAAOS,OAAO,CAAGP,EAAQ,IAAIQ,KAAKR,QAASS,EAC3C,KACJ,KAAK,UACDX,EAAOY,MAAM,CAAGC,SAASX,GACzB,KACJ,KAAK,SACDF,EAAOc,MAAM,EAAG,EAChB,KACJ,KAAK,WACDd,EAAOe,QAAQ,EAAG,EAClB,KACJ,KAAK,WACDf,EAAOgB,QAAQ,CAAGd,EAClB,KACJ,SACIF,EAAOC,IAAI,CAAGG,EACdJ,EAAOE,KAAK,CAAGA,CACvB,CACJ,CACA,OAAOF,CACX,EACatB,EAAmB,MAAO6B,EAAcU,KACjD,IAAMC,EAAc,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,GAC3BC,EAAc,MAAMvC,CAAAA,EAAAA,EAAAA,EAAAA,CAAOA,GAC3BwC,EAA0C,CAC5C,mBAAoB,mBACpB,aAAcD,EAAYE,GAAG,CAAC,eAAiB,eAC/C,OAAUF,EAAYE,GAAG,CAAC,WAAa,mBACvC,kBAAmBF,EAAYE,GAAG,CAAC,oBAAsB,iBACzD,kBAAmBF,EAAYE,GAAG,CAAC,oBAAsB,oBACzD,QAAWF,EAAYE,GAAG,CAAC,YAAc/B,EACzC,OAAU6B,EAAYE,GAAG,CAAC,WAAa/B,EACvC,eAAgB6B,EAAYE,GAAG,CAAC,iBAAmB,EACvD,EAKA,QAHgBX,IAAZM,GACAA,GAAU,CADa,CACZ,OAESN,IAApBM,EAAQpC,KAAuB,EAAhB,CACfoC,EAAQpC,OAAO,CAAG,IAAI0C,QAAQF,OAC3B,CACH,IAAIG,EAMJ,IAAK,GAAM,CAACpB,EAAKF,EAAM,EAAIsB,CALvBP,EAAQpC,OAAO,YAAY0C,QACdN,CADuB,CACfpC,OAAO,CAEf,IAAI0C,QAAQN,EAAQpC,OAAO,GAEN4C,OAAO,GAAI,GACzCrB,UAAgC,GAA5BE,WAAW,GACf,UAAS,IAETe,CAAe,CAACjB,EAAI,CAAGF,EAG/Be,EAAQpC,OAAO,CAAG,IAAI0C,QAAQF,EAClC,CACAJ,EAAQpC,OAAO,CAAC6C,MAAM,CAAC,OAP0D,EAOhDR,EAAYS,QAAQ,IACjD,EAAS9C,OAAO,CAAC+C,GAAG,CAAC,iBAAiB,EAC9B/C,OAAO,CAAC6C,MAAM,CAAC,eAAgB,oBAE3CT,EAAQY,WAAW,CAAG,cACtB,IAAMC,EAAM,MAAMC,MAAM,GAAGxC,EAAAA,EAAUgB,EAAAA,CAAM,CAAEU,GAC7C,IAAK,GAAM,CAACb,EAAKF,EAAM,GAAI4B,EAAIjD,OAAO,CAAC4C,OAAO,GAC1C,GAA0B,eAAtBrB,EAAIE,WAAW,GAAqB,CACpC,IAAMN,EAASJ,EAAkBM,GACjCgB,EAAYc,GAAG,CAAChC,EAEpB,CAEJ,OAAO8B,CACX,EAAC,EAC4B,eAAgBvB,CAAY,EACrD,IAAM0B,EAAuC,CAAC,IAAjC1C,EAAQ2C,MAAM,CAAC,aAAsB3C,EAAU,GAC5D,MAAO,GAAG0C,EAAAA,EAAOtC,EAAAA,EAAWY,EAAAA,CAAM,EAEtC,eAAe4B,EAA8C5B,CAAY,CAAEjC,CAAiB,EACxF,GAAI,CACA,IAAMwD,EAAM,MAAMpD,EAAiB,GAAGiB,EAAAA,EAAWY,EAAAA,CAAM,CAAEjC,GACnD8D,EAAI,MAAMN,EAAIO,IAAI,GACxB,GAAIP,EAAIQ,EAAE,CACN,CADQ,MACDF,EAEP,MAAO,CACHG,OAAQH,EAAEG,MAAM,CAG5B,CAAE,MAAOC,EAAG,CACR,MAAO,CACHD,OAAQ,EAAaE,OAAO,CAEpC,CAEJ,CACO,eAAeC,EAA4CnC,CAAY,CAAEjC,CAAiB,EAC7F,GAAI,CACA,IAAMwD,EAAM,MAAMpD,EAAiB,GAAGiB,EAAAA,EAAWY,EAAAA,CAAM,CAAEjC,GACnD8D,EAAI,MAAMN,EAAIO,IAAI,GACxB,GAAIP,EAAIQ,EAAE,CACN,CADQ,MACDF,EAEP,MAAO,CACHG,OAAQH,EAAEG,MAAM,CAG5B,CAAE,MAAOC,EAAG,CACR,MAAO,CACHD,OAAQ,EAAaE,OAAO,CAEpC,CAEJ,CACA,MAAeN,WA1FFzD,EAkDAiE,EAsBSD,EAkBPP,IA1FFzD,CAAAA,EAAAA,EAAAA,CAAAA,CAAAA,CAAAA,EAAAA,WA0F4CyD,EAAC,gCA1F7CzD,MAkDAiE,CAAAA,EAAAA,EAAAA,CAAAA,CAAAA,CAAAA,EAAAA,6CAAAA,MAsBSD,CAAAA,EAAAA,EAAAA,CAAAA,CAAAA,CAAAA,EAAAA,6CAAAA,MAkBPP,CAAAA,EAAAA,EAAAA,CAAAA,CAAAA,CAAAA,EAAAA,6CAAAA","sources":["webpack://campwiz-frontend/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://campwiz-frontend/external commonjs2 \"module\"","webpack://campwiz-frontend/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://campwiz-frontend/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js","webpack://campwiz-frontend/external commonjs \"require-in-the-middle\"","webpack://campwiz-frontend/external commonjs2 \"process\"","webpack://campwiz-frontend/external commonjs2 \"os\"","webpack://campwiz-frontend/external commonjs2 \"util\"","webpack://campwiz-frontend/external commonjs2 \"fs\"","webpack://campwiz-frontend/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://campwiz-frontend/external node-commonjs \"node:child_process\"","webpack://campwiz-frontend/external commonjs2 \"path\"","webpack://campwiz-frontend/external commonjs2 \"diagnostics_channel\"","webpack://campwiz-frontend/external node-commonjs \"node:http\"","webpack://campwiz-frontend/external node-commonjs \"node:zlib\"","webpack://campwiz-frontend/external node-commonjs \"node:tls\"","webpack://campwiz-frontend/external node-commonjs \"node:https\"","webpack://campwiz-frontend/./node_modules/@opentelemetry/instrumentation/build/esm/platform/node/ sync","webpack://campwiz-frontend/external commonjs \"next/dist/compiled/next-server/app-route.runtime.prod.js\"","webpack://campwiz-frontend/external node-commonjs \"node:os\"","webpack://campwiz-frontend/external node-commonjs \"node:diagnostics_channel\"","webpack://campwiz-frontend/?0634","webpack://campwiz-frontend/external commonjs2 \"crypto\"","webpack://campwiz-frontend/external commonjs \"import-in-the-middle\"","webpack://campwiz-frontend/external node-commonjs \"node:stream\"","webpack://campwiz-frontend/external node-commonjs \"node:util\"","webpack://campwiz-frontend/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://campwiz-frontend/external node-commonjs \"node:fs\"","webpack://campwiz-frontend/external commonjs2 \"worker_threads\"","webpack://campwiz-frontend/external commonjs2 \"perf_hooks\"","webpack://campwiz-frontend/external node-commonjs \"node:worker_threads\"","webpack://campwiz-frontend/external node-commonjs \"node:path\"","webpack://campwiz-frontend/external node-commonjs \"node:net\"","webpack://campwiz-frontend/","webpack://campwiz-frontend/external commonjs2 \"url\"","webpack://campwiz-frontend/external commonjs2 \"child_process\"","webpack://campwiz-frontend/external node-commonjs \"node:readline\"","webpack://campwiz-frontend/external commonjs2 \"tty\"","webpack://campwiz-frontend/external commonjs2 \"async_hooks\"","webpack://campwiz-frontend/external node-commonjs \"node:inspector\"","webpack://campwiz-frontend/app/round/[roundId]/results/csv/route.ts","webpack://campwiz-frontend/sentry-wrapper-module","webpack://campwiz-frontend/?0957","webpack://campwiz-frontend/external commonjs2 \"events\"","webpack://campwiz-frontend/?5805","webpack://campwiz-frontend/./server/index.ts"],"sourcesContent":["module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","module.exports = require(\"module\");","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","\"use strict\";\nif (process.env.NEXT_RUNTIME === 'edge') {\n    module.exports = require('next/dist/server/route-modules/app-route/module.js');\n} else {\n    if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n        if (process.env.NODE_ENV === 'development') {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-route-experimental.runtime.dev.js');\n            }\n        } else {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-route-turbo-experimental.runtime.prod.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-route-experimental.runtime.prod.js');\n            }\n        }\n    } else {\n        if (process.env.NODE_ENV === 'development') {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-route-turbo.runtime.dev.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-route.runtime.dev.js');\n            }\n        } else {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-route-turbo.runtime.prod.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-route.runtime.prod.js');\n            }\n        }\n    }\n}\n\n//# sourceMappingURL=module.compiled.js.map","module.exports = require(\"require-in-the-middle\");","module.exports = require(\"process\");","module.exports = require(\"os\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","module.exports = require(\"node:child_process\");","module.exports = require(\"path\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"node:http\");","module.exports = require(\"node:zlib\");","module.exports = require(\"node:tls\");","module.exports = require(\"node:https\");","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 44725;\nmodule.exports = webpackEmptyContext;","module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");","module.exports = require(\"node:os\");","module.exports = require(\"node:diagnostics_channel\");","\nexport { fetchAPIFromBackendListWithErrorHandling as \"6070dc5bab919eb75a74cd481130eea0e7254e4903\" } from \"/home/runner/work/campwiz-frontend/campwiz-frontend/server/index.ts\"\nexport { fetchFromBackend as \"7fa8fce456b40602ad1b55cd792025843697a22593\" } from \"/home/runner/work/campwiz-frontend/campwiz-frontend/server/index.ts\"\nexport { default as \"7fdadbeee5140d04dc8643d8360b13e3285fc0fc6d\" } from \"/home/runner/work/campwiz-frontend/campwiz-frontend/server/index.ts\"\nexport { getRawAPIPath as \"7ff8556083af83549524853a21f33044fa2c86b4cf\" } from \"/home/runner/work/campwiz-frontend/campwiz-frontend/server/index.ts\"\n","module.exports = require(\"crypto\");","module.exports = require(\"import-in-the-middle\");","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","module.exports = require(\"node:fs\");","module.exports = require(\"worker_threads\");","module.exports = require(\"perf_hooks\");","module.exports = require(\"node:worker_threads\");","module.exports = require(\"node:path\");","module.exports = require(\"node:net\");",null,"module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"node:readline\");","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","module.exports = require(\"node:inspector\");","import { fetchFromBackend } from \"@/server\";\nimport { NextRequest } from \"next/server\";\nexport async function GET(req: NextRequest, { params }: { params: Promise<{ roundId: string }> }) {\n    const { roundId } = await params\n    const datastream = await fetchFromBackend(`/api/v2/round/${roundId}/results/csv`);\n    const stream = datastream.body\n    if (!stream) {\n        return new Response(null, { status: 404 })\n    }\n    return new Response(stream, {\n        headers: datastream.headers\n    })\n}","import * as origModule from 'next/dist/server/app-render/work-unit-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport {} from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nimport * as Sentry from '@sentry/nextjs';\n\n// @ts-expect-error Because we cannot be sure if the RequestAsyncStorage module exists (it is not part of the Next.js public\n// API) we use a shim if it doesn't exist. The logic for this is in the wrapping loader.\n\nconst asyncStorageModule = { ...origModule } ;\n\nconst requestAsyncStorage =\n  'workUnitAsyncStorage' in asyncStorageModule\n    ? asyncStorageModule.workUnitAsyncStorage\n    : 'requestAsyncStorage' in asyncStorageModule\n      ? asyncStorageModule.requestAsyncStorage\n      : undefined;\n\nfunction wrapHandler(handler, method) {\n  // Running the instrumentation code during the build phase will mark any function as \"dynamic\" because we're accessing\n  // the Request object. We do not want to turn handlers dynamic so we skip instrumentation in the build phase.\n  if (process.env.NEXT_PHASE === 'phase-production-build') {\n    return handler;\n  }\n\n  if (typeof handler !== 'function') {\n    return handler;\n  }\n\n  return new Proxy(handler, {\n    apply: (originalFunction, thisArg, args) => {\n      let headers = undefined;\n\n      // We try-catch here just in case the API around `requestAsyncStorage` changes unexpectedly since it is not public API\n      try {\n        const requestAsyncStore = requestAsyncStorage?.getStore() ;\n        headers = requestAsyncStore?.headers;\n      } catch (e) {\n        /** empty */\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return Sentry.wrapRouteHandlerWithSentry(originalFunction , {\n        method,\n        parameterizedRoute: '/round/[roundId]/results/csv',\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst GET = wrapHandler(serverComponentModule.GET , 'GET');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst POST = wrapHandler(serverComponentModule.POST , 'POST');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PUT = wrapHandler(serverComponentModule.PUT , 'PUT');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PATCH = wrapHandler(serverComponentModule.PATCH , 'PATCH');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst DELETE = wrapHandler(serverComponentModule.DELETE , 'DELETE');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst HEAD = wrapHandler(serverComponentModule.HEAD , 'HEAD');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst OPTIONS = wrapHandler(serverComponentModule.OPTIONS , 'OPTIONS');\n\nexport { DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT };\n","import { AppRouteRouteModule } from \"next/dist/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"/home/runner/work/campwiz-frontend/campwiz-frontend/app/round/[roundId]/results/csv/route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/round/[roundId]/results/csv/route\",\n        pathname: \"/round/[roundId]/results/csv\",\n        filename: \"route\",\n        bundlePath: \"app/round/[roundId]/results/csv/route\"\n    },\n    resolvedPagePath: \"/home/runner/work/campwiz-frontend/campwiz-frontend/app/round/[roundId]/results/csv/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","module.exports = require(\"events\");",null,"\"use server\"\nimport { ResponseCookie } from \"next/dist/compiled/@edge-runtime/cookies\";\nimport { ResponseError, ResponseList, ResponseSingle } from \"../types/_\";\nimport { cookies, headers } from 'next/headers'\nconst baseURL = process.env.NEXT_BASE_URL || ''\nconst API_PATH = '/api/v2';\nconst parseCookieString = (cookieString: string): ResponseCookie => {\n    const parts = cookieString.split(';')\n    const cookie: ResponseCookie = {\n        name: '',\n        value: '',\n    }\n    for (const part of parts) {\n        const [key, value] = part.split('=')\n        switch (key.trim().toLowerCase()) {\n            case 'path':\n                cookie.path = value\n                break\n            case 'domain':\n                cookie.domain = value\n                break\n            case 'expires':\n                cookie.expires = value ? new Date(value) : undefined\n                break\n            case 'max-age':\n                cookie.maxAge = parseInt(value)\n                break\n            case 'secure':\n                cookie.secure = true\n                break\n            case 'httponly':\n                cookie.httpOnly = true\n                break\n            case 'samesite':\n                cookie.sameSite = value as 'strict' | 'lax' | 'none'\n                break\n            default:\n                cookie.name = key\n                cookie.value = value\n        }\n    }\n    return cookie\n}\nexport const fetchFromBackend = async (path: string, options?: RequestInit): Promise<Response> => {\n    const cookieStore = await cookies()\n    const headerStore = await headers()\n    const injectedHeaders: Record<string, string> = {\n        'X-Requested-With': 'fetchFromBackend',\n        'User-Agent': headerStore.get('user-agent') || 'From Backend',\n        'Accept': headerStore.get('accept') || 'application/json',\n        'Accept-Language': headerStore.get('accept-language') || 'en-US,en;q=0.9',\n        'Accept-Encoding': headerStore.get('accept-encoding') || 'gzip, deflate, br',\n        'Referer': headerStore.get('referer') || baseURL,\n        'Origin': headerStore.get('origin') || baseURL,\n        'X-CSRF-Token': headerStore.get('x-csrf-token') || '',\n    }\n\n    if (options === undefined) {\n        options = {}\n    }\n    if (options.headers === undefined) {\n        options.headers = new Headers(injectedHeaders)\n    } else {\n        let headersObj: Headers;\n        if (options.headers instanceof Headers) {\n            headersObj = options.headers;\n        } else {\n            headersObj = new Headers(options.headers as Record<string, string>);\n        }\n        for (const [key, value] of headersObj.entries()) {\n            if (key.toLowerCase() === 'cookie') {\n                continue // Skip cookies from headers, we will handle them separately\n            } else {\n                injectedHeaders[key] = value as string\n            }\n        }\n        options.headers = new Headers(injectedHeaders)\n    }\n    options.headers.append('Cookie', cookieStore.toString())\n    if (!options.headers.has('Content-Type')) {\n        options.headers.append('Content-Type', 'application/json')\n    }\n    options.credentials = 'same-origin'\n    const res = await fetch(`${baseURL}${path}`, options)\n    for (const [key, value] of res.headers.entries()) {\n        if (key.toLowerCase() === 'set-cookie') {\n            const cookie = parseCookieString(value)\n            cookieStore.set(cookie)\n\n        }\n    }\n    return res\n}\nexport const getRawAPIPath = async function (path: string): Promise<string> {\n    const base = baseURL.search(/localhost/) === -1 ? baseURL : ''\n    return `${base}${API_PATH}${path}`\n}\nasync function fetchAPIFromBackendSingleWithErrorHandling<T>(path: string, req?: RequestInit): Promise<ResponseSingle<T> | ResponseError> {\n    try {\n        const res = await fetchFromBackend(`${API_PATH}${path}`, req)\n        const r = await res.json();\n        if (res.ok) {\n            return r\n        } else {\n            return {\n                detail: r.detail\n            }\n        }\n    } catch (e) {\n        return {\n            detail: (e as Error).message\n        }\n    }\n\n}\nexport async function fetchAPIFromBackendListWithErrorHandling<T>(path: string, req?: RequestInit): Promise<ResponseList<T> | ResponseError> {\n    try {\n        const res = await fetchFromBackend(`${API_PATH}${path}`, req)\n        const r = await res.json();\n        if (res.ok) {\n            return r\n        } else {\n            return {\n                detail: r.detail\n            }\n        }\n    } catch (e) {\n        return {\n            detail: (e as Error).message\n        }\n    }\n\n}\nexport default fetchAPIFromBackendSingleWithErrorHandling;\n"],"names":["GET","req","params","roundId","datastream","fetchFromBackend","stream","body","headers","Response","status","serverComponentModule.GET","serverComponentModule.POST","serverComponentModule.PUT","serverComponentModule.PATCH","serverComponentModule.DELETE","serverComponentModule.HEAD","serverComponentModule.OPTIONS","baseURL","process","env","NEXT_BASE_URL","API_PATH","parseCookieString","parts","cookieString","split","cookie","name","value","part","key","trim","toLowerCase","path","domain","expires","Date","undefined","maxAge","parseInt","secure","httpOnly","sameSite","options","cookieStore","cookies","headerStore","injectedHeaders","get","Headers","headersObj","entries","append","toString","has","credentials","res","fetch","set","base","search","fetchAPIFromBackendSingleWithErrorHandling","r","json","ok","detail","e","message","fetchAPIFromBackendListWithErrorHandling","getRawAPIPath"],"sourceRoot":""}