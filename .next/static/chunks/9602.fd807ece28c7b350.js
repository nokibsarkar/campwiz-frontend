try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},i=(new e.Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="ac49d7a7-8100-4ee3-ac95-5e86f4922518",e._sentryDebugIdIdentifier="sentry-dbid-ac49d7a7-8100-4ee3-ac95-5e86f4922518")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9602],{41397:(e,i,t)=>{t.d(i,{A:()=>l});var n=t(95155),r=t(11087);let l=e=>{let{src:i="/lottie/loading.lottie"}=e;return(0,n.jsx)("div",{className:"loading-popup fixed top-0 left-0 w-full h-full bg-transparent z-50 flex items-center justify-center flex-col backdrop-blur-[2px]",children:(0,n.jsx)(r.default,{src:i})})}},89602:(e,i,t)=>{t.r(i),t.d(i,{default:()=>j});var n=t(95155),r=t(29716),l=t(62966),a=t(12422),o=t(9670),s=t(78679),d=t(55857),u=t(34477);let c=(0,u.createServerReference)("7f1b6e866ea2fda93baccb982ad43339f3fe664fa5",u.callServer,void 0,u.findSourceMapURL,"default");var m=t(12115),f=t(98913),M=t(41397),y=t(33106),p=t(24431),b=t(47269),x=t(23547),g=t(89429),S=t(89702);let h=(0,m.lazy)(()=>Promise.all([t.e(4956),t.e(8685),t.e(1162)]).then(t.bind(t,11162))),w=m.forwardRef(function(e,i){return(0,n.jsx)(y.A,{direction:"up",ref:i,...e})});var A=function(e){return e.CREATE="create",e.IMPORT="import",e.DISTRIBUTE="distribute",e.SUCCESS="success",e}(A||{});let j=e=>{let{campaignId:i,onClose:t}=e,[u,y]=(0,m.useReducer)(f.p,{...f.j,campaignId:i}),[A,j]=(0,m.useState)(!1),[v,C]=(0,m.useState)(null),[I,B]=(0,m.useState)("create"),[R,D]=(0,m.useState)(""),[k,z]=(0,m.useState)(null),[E,T]=(0,m.useState)(null),O=(0,m.useCallback)(async()=>{j(!0);try{C(null),u.articleMinimumAddedBytes=+u.articleMinimumAddedBytes,u.articleMinimumAddedWords=+u.articleMinimumAddedWords,u.articleMinimumTotalBytes=+u.articleMinimumTotalBytes,u.articleMinimumTotalWords=+u.articleMinimumTotalWords,u.imageMinimumSizeBytes=+u.imageMinimumSizeBytes,u.imageMinimumResolution=+u.imageMinimumResolution,u.videoMinimumSizeBytes=+u.videoMinimumSizeBytes,u.videoMinimumResolution=+u.videoMinimumResolution,u.videoMinimumDurationMilliseconds=+u.videoMinimumDurationMilliseconds,u.audioMinimumSizeBytes=+u.audioMinimumSizeBytes,u.audioMinimumDurationMilliseconds=+u.audioMinimumDurationMilliseconds;let e=await c(u);if(!e)throw Error("Round creation failed");if("detail"in e)throw Error(e.detail);let i=e.data;T(i),B("import")}catch(e){console.error(e),C(e.message)}finally{j(!1)}},[u]),W=(0,m.useCallback)(async e=>{if(z(e),!E)throw Error("Round not created yet");if(E.isPublicJury)return void B("success");B("distribute");let i=await (0,x.A)(E.roundId,u.jury);if("detail"in i)throw Error(i.detail);D(i.data.taskId)},[E,u.jury]),_=(0,m.useMemo)(()=>{if(!E)return null;if("import"===I)if(E.dependsOnRoundId)return(0,n.jsx)(g.A,{round:E,distribute:W,onClose:t});else return(0,n.jsx)(b.A,{round:E,onClose:t,distribute:W});return"success"===I&&k?(0,n.jsx)(S.t,{onClose:t,round:E,task:k}):null},[E,W,k,t,I]);return E&&_?_:(0,n.jsxs)(r.A,{open:!0,sx:{width:{xs:"100%",sm:"80%"},margin:"auto","& .MuiDialog-paper":{width:"100%",maxWidth:"100%"}},slots:{transition:w},onClose:t,children:[(0,n.jsx)(l.A,{children:"Create a new round"}),(0,n.jsxs)(a.A,{children:[v&&(0,n.jsx)(o.default,{variant:"h6",color:"error",sx:{m:2,textAlign:"center"},children:v}),A&&(0,n.jsx)(M.A,{src:"/lottie/loading.lottie"}),"create"===I&&(0,n.jsx)(h,{...u,loading:A,dispatch:y}),"distribute"===I&&(0,n.jsx)(p.A,{taskId:R,onSuccess:console.log})]}),(0,n.jsxs)(s.A,{sx:{justifyContent:"space-between",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},children:[(0,n.jsx)(d.default,{onClick:t,variant:"outlined",color:"error",disabled:A,children:"Cancel"}),"create"===I?(0,n.jsx)(d.default,{onClick:O,variant:"contained",color:"success",disabled:A,loading:A,children:"Create Round"}):(0,n.jsx)(d.default,{onClick:t,variant:"contained",color:"error",disabled:A,children:"Close"})]})]})}},98913:(e,i,t)=>{t.d(i,{j:()=>a,p:()=>o});var n=t(30832),r=t.n(n),l=t(66655);let a={allowedMediaTypes:[l.z.IMAGE,l.z.AUDIO,l.z.VIDEO],type:l.F.BINARY,startDate:r()().toISOString(),endDate:r()().toISOString(),name:"",description:"",isPublicJury:!1,allowJuryToParticipate:!0,campaignId:"",jury:[],isOpen:!1,serial:0,allowMultipleJudgement:!0,secretBallot:!0,blacklist:"",audioMinimumDurationMilliseconds:0,audioMinimumSizeBytes:0,videoMinimumDurationMilliseconds:0,videoMinimumSizeBytes:0,videoMinimumResolution:0,imageMinimumResolution:2e6,imageMinimumSizeBytes:0,maximumSubmissionOfSameArticle:1,articleAllowExpansions:!0,articleAllowCreations:!0,articleMinimumTotalBytes:0,articleMinimumTotalWords:0,articleMinimumAddedBytes:0,articleMinimumAddedWords:0,quorum:1},o=(e,i)=>({...e,...i})}}]);