try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},i=(new e.Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="e0d9f3fd-fd24-4201-a55a-23737e886941",e._sentryDebugIdIdentifier="sentry-dbid-e0d9f3fd-fd24-4201-a55a-23737e886941")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5687],{41397:(e,i,t)=>{t.d(i,{A:()=>l});var n=t(95155),r=t(11087);let l=e=>{let{src:i="/lottie/loading.lottie"}=e;return(0,n.jsx)("div",{className:"loading-popup fixed top-0 left-0 w-full h-full bg-transparent z-50 flex items-center justify-center flex-col backdrop-blur-[2px]",children:(0,n.jsx)(r.default,{src:i})})}},45687:(e,i,t)=>{t.r(i),t.d(i,{default:()=>v});var n=t(95155),r=t(29716),l=t(62966),s=t(12422),a=t(9670),d=t(78679),o=t(55857),u=t(89915),c=t(34477);let f=(0,c.createServerReference)("7f190d3bbb56dc7c408cd8ff18aae92e94229abbd8",c.callServer,void 0,c.findSourceMapURL,"updateRound");var m=t(12115),x=t(98913),p=t(41397),h=t(33106),y=t(2028);let b=(0,m.lazy)(()=>Promise.all([t.e(4956),t.e(8685),t.e(1162)]).then(t.bind(t,11162))),j=m.forwardRef(function(e,i){return(0,n.jsx)(h.A,{direction:"up",ref:i,...e})});var g=function(e){return e.EDIT="edit",e.DISTRIBUTE="distribute",e.DISTRIBUTING="distributing",e.SUCCESS="success",e}(g||{});let w=e=>{let{campaignId:i,onClose:t,existingRound:c,setUpdatedRound:h,setStage:y}=e,[g,w]=(0,m.useReducer)(x.p,{...c,jury:Object.values((null==c?void 0:c.jury)||{}),campaignId:i}),[v,A]=(0,m.useState)(!1),[I,S]=(0,m.useState)(null),M=(0,m.useMemo)(()=>{if(g.isPublicJury)return!1;if(c.quorum!==g.quorum)return!0;let e=new Set(Object.values(c.jury||{}));if(g.jury.length!==e.size)return!0;let i=new Set(g.jury||[]);return e.intersection(i).size!==e.size},[c.jury,c.quorum,g.isPublicJury,g.jury,g.quorum]),D=(0,m.useCallback)(async()=>{A(!0);try{S(null);let e=await f(c.roundId,g);if(!e)throw Error("Round creation failed");if("detail"in e)throw Error(e.detail);let i=e.data;h(i),M?y("distribute"):y("success")}catch(e){console.error(e),S(e.message)}finally{A(!1)}},[c.roundId,M,g,y,h]);return(0,n.jsxs)(r.A,{open:!0,sx:{width:{xs:"100%",sm:"80%"},margin:"auto","& .MuiDialog-paper":{width:"100%",maxWidth:"100%"}},slots:{transition:j},onClose:t,children:[(0,n.jsx)(l.A,{sx:{textAlign:"center"},component:"h2",variant:"h4",children:"Update Round"}),(0,n.jsxs)(s.A,{children:[I&&(0,n.jsx)(a.default,{variant:"h6",color:"error",sx:{m:2,textAlign:"center"},children:I}),v&&(0,n.jsx)(p.A,{src:"/lottie/loading.lottie"}),(0,n.jsx)(b,{...g,loading:v,dispatch:w,hideAdvanced:!0})]}),(0,n.jsxs)(d.A,{sx:{justifyContent:"space-between",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},children:[(0,n.jsx)(o.default,{onClick:t,variant:"outlined",color:"error",disabled:v,children:"Cancel"}),(0,n.jsxs)(o.default,{onClick:D,variant:"contained",color:"success",disabled:v,children:[(0,n.jsx)(u.A,{size:24,color:"inherit",sx:{display:v?"inline-block":"none",mr:1}}),"Update Round"]})]})]})},v=e=>{let{campaignId:i,onClose:t,existingRound:u}=e,[c,f]=(0,m.useState)("edit"),[x,p]=(0,m.useState)(null);return"edit"===c?(0,n.jsx)(w,{campaignId:i,onClose:t,existingRound:u,setUpdatedRound:p,setStage:f}):"distribute"===c?(0,n.jsx)(y.A,{roundId:(null==x?void 0:x.roundId)||"",juries:Object.values((null==x?void 0:x.jury)||{}),afterDistribution:()=>{f("success")},onClose:t}):"success"===c?(0,n.jsxs)(r.A,{open:!0,sx:{width:{xs:"100%",sm:"80%"},margin:"auto","& .MuiDialog-paper":{width:"100%",maxWidth:"100%"}},onClose:t,children:[(0,n.jsx)(l.A,{sx:{textAlign:"center"},component:"h2",variant:"h4",children:"Round Updated"}),(0,n.jsx)(s.A,{children:(0,n.jsx)(a.default,{variant:"h6",sx:{m:2,textAlign:"center"},children:"Round has been successfully updated"})}),(0,n.jsx)(d.A,{sx:{justifyContent:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},children:(0,n.jsx)(o.default,{onClick:t,variant:"contained",color:"success",children:"Close"})})]}):null}},98913:(e,i,t)=>{t.d(i,{j:()=>s,p:()=>a});var n=t(30832),r=t.n(n),l=t(66655);let s={allowedMediaTypes:[l.z.IMAGE,l.z.AUDIO,l.z.VIDEO],type:l.F.BINARY,startDate:r()().toISOString(),endDate:r()().toISOString(),name:"",description:"",isPublicJury:!1,allowJuryToParticipate:!0,campaignId:"",jury:[],isOpen:!1,serial:0,allowMultipleJudgement:!0,secretBallot:!0,blacklist:"",audioMinimumDurationMilliseconds:0,audioMinimumSizeBytes:0,videoMinimumDurationMilliseconds:0,videoMinimumSizeBytes:0,videoMinimumResolution:0,imageMinimumResolution:2e6,imageMinimumSizeBytes:0,maximumSubmissionOfSameArticle:1,articleAllowExpansions:!0,articleAllowCreations:!0,articleMinimumTotalBytes:0,articleMinimumTotalWords:0,articleMinimumAddedBytes:0,articleMinimumAddedWords:0,quorum:1},a=(e,i)=>({...e,...i})}}]);