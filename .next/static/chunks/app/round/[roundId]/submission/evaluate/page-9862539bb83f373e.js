try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="53822c8e-6bcd-4b1f-a325-eaffb274c9dd",e._sentryDebugIdIdentifier="sentry-dbid-53822c8e-6bcd-4b1f-a325-eaffb274c9dd")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2442],{12296:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var s=i(95155),n=i(7433),l=i(4007),a=i(12115),r=i(66655),o=i(55857),u=i(29716),d=i(78679),c=i(42861),m=i(79608),h=i(15788),x=i(51013),f=i(66766),g=i(50412);let b=(0,a.lazy)(()=>Promise.all([i.e(5534),i.e(3987)]).then(i.bind(i,13987))),p=(0,a.lazy)(()=>Promise.all([i.e(401),i.e(8776)]).then(i.bind(i,38776))),v=(0,a.lazy)(()=>i.e(3614).then(i.bind(i,23614))),j=(0,a.lazy)(()=>i.e(7594).then(i.bind(i,77594))),y=e=>{let{submission:t}=e,[i,r]=(0,a.useState)(!1),c=()=>{r(!i)};return(0,s.jsxs)(a.Suspense,{fallback:(0,s.jsx)(n.default,{}),children:[(0,s.jsx)(o.default,{onClick:c,className:"",disabled:i,variant:"text",color:"primary",size:"small",startIcon:(0,s.jsx)(h.A,{}),sx:{overflow:"hidden",textOverflow:"ellipsis"},children:"File Information"}),(0,s.jsxs)(u.A,{open:i,onClose:c,fullWidth:!0,maxWidth:"lg",className:"overflow-hidden",children:[(0,s.jsx)(l.A,{submission:t}),(0,s.jsx)(d.A,{children:(0,s.jsx)(o.default,{variant:"outlined",color:"error",onClick:c,startIcon:(0,s.jsx)(m.A,{}),children:"Close"})})]})]})},S=e=>{let{submission:t,currentEvaluation:i,nextImageWrapper:o,evaluationCount:u,assignmentCount:d,isLoading:m,currentCursor:h,error:S,submit:w,saving:A,returnTo:I,hasNext:C=!0,showProgress:E=!0,noHeader:N=!1,setImageLoaded:k,imageLoaded:P,onSkip:z}=e,D=(0,c.A)(e=>e.breakpoints.down("sm"));return(0,s.jsxs)(s.Fragment,{children:[!N&&(0,s.jsx)(g.default,{returnTo:I}),(0,s.jsxs)("div",{className:"flex sm:h-full w-full sm:flex-row flex-col",style:{height:"calc(95% - 75px)"},children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-2/3 h-3/4 flex flex-col",children:[D&&(0,s.jsxs)("div",{className:"relative max-h-1/12 flex flex-col items-center",children:[(0,s.jsxs)("h1",{className:"font-bold text-center text-ellipsis",children:[t.title.substring(0,40),t.title.length>40?"...":""]}),(0,s.jsx)(y,{submission:t})]}),t.mediatype===r.z.IMAGE&&(0,s.jsx)(f.default,{src:t.thumburl||"/red-hill.svg",alt:t.title,className:"m-auto block object-contain max-h-5/6 self-center sm:self-auto",loading:"lazy",placeholder:"blur",blurDataURL:x.A.src,onLoad:()=>k(!0),width:t.thumbwidth||640,height:t.thumbheight,unoptimized:!0,onError:e=>{console.log("Error loading image",e),k(!0)}}),t.mediatype===r.z.VIDEO&&(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(n.default,{sx:{width:"100%"}}),children:(0,s.jsx)(b,{poster:t.thumburl,src:t.url,height:t.height,width:t.width,onPosterLoaded:()=>k(!0)})}),t.mediatype===r.z.AUDIO&&(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(n.default,{sx:{width:"100%"}}),children:(0,s.jsx)(p,{src:t.url,title:t.title,author:t.author,onPosterLoaded:()=>k(!0)})})]}),(0,s.jsx)("div",{className:"relative h-1/6 sm:h-11/12 w-full sm:w-1/3 flex flex-col justify-center items-center my-auto",children:(0,s.jsxs)(a.Suspense,{fallback:(0,s.jsx)(n.default,{sx:{width:"100%"}}),children:[!D&&(0,s.jsx)(l.A,{submission:t}),S&&(0,s.jsx)("p",{className:"text-center text-lg text-red-600 font-bold",children:S}),i.type===r.F.BINARY&&(0,s.jsx)(v,{goNext:()=>o(1),goPrevious:()=>o(-1),submitScore:w,evaluation:i,saving:A||m||!P,noPrevious:0===h,noNext:!C,evaluationCount:u,assignmnetCount:d,showProgress:E,onSkip:z}),i.type===r.F.SCORE&&(0,s.jsx)(j,{evaluation:i,goNext:()=>o(1),goPrevious:()=>o(-1),submitScore:w,saving:A||m||!P,noPrevious:0===h,assignmnetCount:d,evaluationCount:u,noNext:!C,showProgress:E,onSkip:z})]})})]})]})}},34222:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(95155),n=i(66766),l=i(13719),a=i(6874),r=i.n(a);let o=()=>(0,s.jsx)(r(),{href:"/",className:"cursor-pointer",children:(0,s.jsx)(n.default,{src:l.A,alt:"Logo of CampWiz",height:80,style:{margin:"auto"}})})},36963:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var s=i(95155),n=i(34222),l=i(55857),a=i(6874),r=i.n(a),o=i(1384),u=i(29414);let d=e=>{let{skipCount:t}=e;return(0,s.jsxs)(l.default,{variant:"outlined",color:"secondary",sx:{m:1},endIcon:(0,s.jsx)(o.A,{}),onClick:()=>window.location.reload(),children:["Show skipped ",t," submissions"]})},c=e=>{let{campaignId:t,roundId:i,skipCount:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,s.jsx)(n.A,{}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"All Set"}),(0,s.jsx)("p",{className:"text-lg",children:"Seems like, You have no pending submissions to evaluate in this round."}),(0,s.jsxs)("div",{className:"flex-row flex justify-center",children:[(0,s.jsx)(r(),{href:"/campaign/".concat(t),children:(0,s.jsx)(l.default,{variant:"contained",color:"primary",sx:{m:1},startIcon:(0,s.jsx)(u.A,{}),children:"Go to Round"})}),(0,s.jsx)(r(),{href:"/round/".concat(i,"/submission/evaluated"),children:(0,s.jsx)(l.default,{variant:"outlined",color:"secondary",sx:{m:1},endIcon:(0,s.jsx)(o.A,{}),children:"Modify your votes"})}),a>0&&(0,s.jsx)(d,{skipCount:a,roundId:i,campaignId:t})]})]})]})}},51013:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let s={src:"/_next/static/media/logo-animated.6114123d.svg",height:768,width:1366,blurWidth:0,blurHeight:0}},52018:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var s=i(68788);let n=async(e,t,i)=>{let n="/evaluation/";return t&&(n="/evaluation/public/".concat(e)),await (0,s.A)(n,{method:"POST",body:JSON.stringify(i)})}},60106:(e,t,i)=>{Promise.resolve().then(i.bind(i,71527)),Promise.resolve().then(i.bind(i,72292)),Promise.resolve().then(i.bind(i,7433))},69220:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var s=i(34477);let n=(0,s.createServerReference)("6070dc5bab919eb75a74cd481130eea0e7254e4903",s.callServer,void 0,s.findSourceMapURL,"fetchAPIFromBackendListWithErrorHandling")},71527:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var s=i(95155),n=i(91553),l=i(12115),a=i(52018),r=i(66655),o=i(36963),u=i(12296);let d=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);let i=await t.blob();return{url:URL.createObjectURL(i)}}catch(e){return{error:e.message}}},c=e=>{var t;let{roundId:i,initailEvaluations:c,next:m,limit:h=1,campaignId:x,isPublicJury:f,assignmentCount:g,evaluationCount:b}=e,[p,v]=l.useState(c),[j,y]=l.useState(m),[S,w]=l.useState(0),[A,I]=l.useState(!1),[C,E]=(0,l.useState)(null!=(t=null==p?void 0:p[0])?t:null),[N,k]=(0,l.useState)(!0),[P,z]=(0,l.useState)(null),[D,L]=(0,l.useState)((null==p?void 0:p.length)>S),_=D?p[S+1]:null,[R,O]=(0,l.useState)(g),[F,T]=(0,l.useState)(b),[W,U]=(0,l.useState)(!1),[q,M]=(0,l.useState)(!1),[G,H]=(0,l.useState)(null),[B,J]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(!p)return E(null);if(q)return;let e=p[S];if(e&&e.submission&&(!e.submission.description||""===e.submission.description)&&!q){console.log("Fetching Description");let t=new URLSearchParams({action:"query",format:"json",prop:"imageinfo",titles:"File:".concat(e.submission.title),formatversion:"2",iiprop:"extmetadata|url",iiurlwidth:"640",iiurlheight:"640",iimetadataversion:"latest",iiextmetadatafilter:"ImageDescription",origin:"*"}).toString();M(!0),fetch("https://commons.wikimedia.org/w/api.php?"+t).then(e=>e.json()).then(e=>{if(e.query&&e.query.pages&&e.query.pages.length>0){let t=e.query.pages[0];if(t.imageinfo&&t.imageinfo.length>0){let e=t.imageinfo[0];if(e.extmetadata&&e.extmetadata.ImageDescription){let t=document.createElement("div");t.innerHTML=e.extmetadata.ImageDescription.value;let i=t.innerText;t.remove(),console.log("Fetched Description:",i),H(i),E(e=>e&&e.submission?{...e,submission:{...e.submission,description:i}}:null)}}}}).catch(e=>{console.error("Error fetching description:",e)}).finally(()=>{M(!1)})}E(e)},[p,S]),console.log("Current Evaluation",C),(0,l.useEffect)(()=>{_&&_.submission&&_.submission.thumburl&&_.submission.mediatype===r.z.IMAGE&&_.submission.thumburl.startsWith("http")&&d(_.submission.thumburl).then(e=>{!e.error&&e.url&&v(t=>t.map((t,i)=>t.submission&&i===S+1?{...t,submission:{...t.submission,thumburl:e.url,submissionId:t.submission.submissionId||""}}:t))})},[S,_]);let Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log("Next Image Wrapper",S,null==p?void 0:p.length),k(!1),w(t=>t+e)},V=async e=>{try{if(W||!C||!C.submission||!N)return;U(!0);let t=await (0,a.A)(i,f,[{evaluationId:C.evaluationId,score:e,comment:null,submissionId:C.submission.submissionId,description:G}]);if(!t)throw Error("Something went wrong");if("detail"in t)throw Error(t.detail);O(t.totalAssignmentCount),T(t.totalEvaluatedCount),console.log("Submitted"),Y(),z(null)}catch(e){z(e.message)}finally{U(!1)}};if((0,l.useEffect)(()=>{j&&i&&h&&D&&p&&p.length&&(S<p.length-1||(I(!0),(0,n.A)({roundId:i,limit:h,next:j,includeSubmissions:!0,isPublic:f,includeEvaluated:!1,includeNonEvaluated:!0,randomize:!0}).then(async e=>{if(!e)return;if("detail"in e)return void z(e.detail);let t=e.data;O(e.totalAssignmentCount),T(e.totalEvaluatedCount),v(e=>[...e,...t]),y(e.next),L(void 0!==e.next&&e.next!==j&&""!==e.next),I(!1)})))},[S,p,p.length,D,f,h,j,i]),!C)return(0,s.jsx)(o.A,{roundId:i,campaignId:x,skipCount:B});let{submission:K}=C;return K?(0,s.jsx)(u.A,{campaignId:x,submission:K,currentEvaluation:C,nextImageWrapper:Y,imageLoaded:N,setImageLoaded:k,evaluationCount:F,assignmentCount:R,isPublicJury:f,isLoading:A,currentCursor:S,setCurrentCursor:w,submit:V,saving:W,error:P,returnTo:"/campaign/".concat(x),hasNext:!0,onSkip:()=>{J(e=>e+1)}}):null}},72292:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var s=i(95155),n=i(12115),l=i(16779),a=i(51877),r=i(55965),o=i(55857),u=i(29716),d=i(12422),c=i(78679),m=i(19463);i(85572);var h=i(66332),x=i(66766),f=i(91553),g=i(52018),b=i(36963),p=i(50412),v=i(79608),j=i(59869);let y={button:{position:"absolute",bottom:0,right:0}},S=()=>document.body.style.overflow="hidden",w=()=>document.body.style.overflow="auto",A=e=>{let{initailEvaluations:t,limit:i,roundId:A,isPublicJury:I,campaignId:C,next:E}=e,[N,k]=(0,n.useState)(t),[P,z]=(0,n.useState)(E),[D,L]=(0,n.useState)(!1),[_,R]=(0,n.useState)(null),[O,F]=(0,n.useState)(null),T=async()=>{L(!0);try{let e=100/i,t=N.map((t,i)=>({evaluationId:t.evaluationId,score:e*(N.length-i),comment:null,submissionId:t.submissionId})),s=await (0,g.A)(A,I,t);if(!s)return;if("detail"in s)console.error(s.detail);else{let e=await (0,f.A)({roundId:A,limit:i,next:P,includeSubmissions:!0,isPublic:I});if(!e)return;if("detail"in e)return void R(e.detail);let t=e.data;void 0===e.next||e.next===P||""===e.next?(z(void 0),k([])):(k(t),z(e.next))}}finally{L(!1)}};return _?(0,s.jsxs)("p",{children:["Error : ",_]}):0===N.length?(0,s.jsx)(b.A,{campaignId:C,roundId:A,skipCount:0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.default,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Ay,{allowDrag:!D,onSortEnd:(e,t)=>{console.log(e,t),k(i=>(0,m.p)(i,e,t))},style:{display:"flex",flexWrap:"wrap",userSelect:"none"},draggedItemClassName:"k",children:N.map((e,t)=>{let{submission:i}=e;return i&&(0,s.jsx)(l.Uq,{children:(0,s.jsx)(a.A,{overlap:"circular",anchorOrigin:{vertical:"top",horizontal:"left"},badgeContent:t+1,color:"primary",children:(0,s.jsxs)("div",{style:{position:"relative",margin:"2em",cursor:"grab",userSelect:"none",borderRadius:"20%"},className:"w-20 h-20 sm:w-24 sm:h-24",onDragStart:S,onDragEnd:w,children:[(0,s.jsx)(r.A,{color:"primary",size:"small",sx:y.button,"aria-label":"show-preview",onClick:()=>F(i),children:(0,s.jsx)(h.A,{})}),(0,s.jsx)(x.default,{src:i.thumburl,alt:i.title,style:{pointerEvents:"none",borderRadius:"20%"},fill:!0,unoptimized:!0,slot:"img"})]})})},i.submissionId)})}),(0,s.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,s.jsx)(o.default,{variant:"contained",color:"primary",onClick:T,loading:D,disabled:D,startIcon:(0,s.jsx)(j.A,{}),sx:{mr:0,ml:"auto",right:0},children:"Submit"})}),O&&(0,s.jsxs)(u.A,{open:!!O,onClose:()=>F(null),sx:{textAlign:"center"},children:[(0,s.jsx)(d.A,{children:(0,s.jsx)(x.default,{src:O.thumburl,alt:O.title,width:O.thumbwidth||640,height:O.thumbheight,unoptimized:!0})}),(0,s.jsx)(c.A,{children:(0,s.jsx)(o.default,{onClick:()=>F(null),color:"error",variant:"contained",startIcon:(0,s.jsx)(v.A,{}),children:"Close"})})]})]})]})}},85572:()=>{},91553:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var s=i(69220);let n=async e=>{let{roundId:t,includeSkipped:i,limit:n,next:l,prev:a,includeSubmissions:r,isPublic:o,includeEvaluated:u,includeNonEvaluated:d,randomize:c}=e,m=new URLSearchParams({roundId:t});i&&m.append("includeSkipped",i.toString()),n&&m.append("limit",n.toString()),l&&m.append("next",l),a&&m.append("prev",a),r&&m.append("includeSubmission",r.toString()),o&&m.append("isPublic",o.toString()),void 0!==u&&m.append("includeEvaluated",u.toString()),void 0!==d&&m.append("includeNonEvaluated",d.toString()),void 0!==c&&m.append("randomize",String(c)),console.log("loadNextEvaluation",m.toString());let h=(o?"/round/".concat(t,"/next/public"):"/evaluation/")+"?".concat(m.toString()),x=await (0,s._)(h);return x?("detail"in x,x):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[9245,6454,6766,9978,225,7638,6318,9958,9566,7433,6813,6653,2454,4850,8441,4133,7358],()=>t(60106)),_N_E=e.O()}]);