try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2effde98-2370-410d-87eb-961c69a44250",e._sentryDebugIdIdentifier="sentry-dbid-2effde98-2370-410d-87eb-961c69a44250")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{2028:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var s=r(95155),n=r(12115),a=r(29716),l=r(62966),o=r(12422),i=r(9670),d=r(76898),c=r(41892),u=r(78679),x=r(55857),h=r(24431),j=r(23547);let f=e=>{let{juries:t,roundId:r,afterDistribution:f,onClose:m}=e,[p,v]=(0,n.useState)(t.reduce((e,t)=>({...e,[t]:!0}),{})),g=Object.keys(p).filter(e=>p[e]),[b,A]=(0,n.useState)(!1),[y,C]=(0,n.useState)(null),I=async()=>{if(!g||0===g.length||!r)throw Error("Round not created yet");A(!0);let e=await (0,j.A)(r,g);if("detail"in e)throw Error(e.detail);C(e.data)};return(0,s.jsxs)(a.A,{open:!0,onClose:m,children:[(0,s.jsx)(l.A,{children:"Distribute Task"}),(0,s.jsx)(o.A,{children:b&&y?(0,s.jsx)(h.A,{taskId:y.taskId,onSuccess:e=>{A(!1),f(e)}}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.default,{variant:"h5",component:"h2",gutterBottom:!0,sx:{textAlign:"center"},children:"Task Distribute"}),(0,s.jsx)(i.default,{variant:"subtitle1",gutterBottom:!0,sx:{textAlign:"center",color:"text.secondary"},children:"Select the juries to distribute the task"}),(0,s.jsx)(d.A,{control:(0,s.jsx)(c.A,{checked:g.length===t.length,onChange:e=>v(t.reduce((t,r)=>({...t,[r]:e.target.checked}),{})),name:"all"}),label:"All"}),(0,s.jsx)("br",{}),t.map(e=>(0,s.jsx)(d.A,{control:(0,s.jsx)(c.A,{checked:p[e],onChange:t=>v({...p,[e]:t.target.checked}),name:e}),label:e},e))]})}),(0,s.jsxs)(u.A,{children:[(0,s.jsx)(x.default,{onClick:m,children:"Cancel"}),(0,s.jsx)(x.default,{onClick:I,variant:"contained",color:"primary",sx:{marginTop:"1rem"},loading:b,disabled:b,children:"Distribute"})]})]})}},3635:(e,t,r)=>{Promise.resolve().then(r.bind(r,8686)),Promise.resolve().then(r.bind(r,84317)),Promise.resolve().then(r.bind(r,59569)),Promise.resolve().then(r.bind(r,50412)),Promise.resolve().then(r.bind(r,3824)),Promise.resolve().then(r.bind(r,29721)),Promise.resolve().then(r.bind(r,61786)),Promise.resolve().then(r.bind(r,30250)),Promise.resolve().then(r.bind(r,20071)),Promise.resolve().then(r.bind(r,81063)),Promise.resolve().then(r.bind(r,9670)),Promise.resolve().then(r.t.bind(r,6874,23))},3824:(e,t,r)=>{"use strict";r.d(t,{B:()=>c,translationLink:()=>u});var s=r(12115),n=r(17985),a=r(91218),l=r(16453),o=r(74247),i=r(14431),d=r(65106);function c(e,t,r){let n=(0,l.getCookie)(d.Ok),o=(0,a.Bd)(t,r),{i18n:i}=o;{let[t,r]=(0,s.useState)(i.resolvedLanguage);(0,s.useEffect)(()=>{t!==i.resolvedLanguage&&r(i.resolvedLanguage)},[t,i.resolvedLanguage]),(0,s.useEffect)(()=>{e&&i.resolvedLanguage!==e&&i.changeLanguage(e)},[e,i]),(0,s.useEffect)(()=>{e&&n!==e&&(0,l.setCookie)(d.Ok,e,{path:"/"})},[e,n])}return o}n.Ay.use(a.r9).use(i.A).use((0,o.A)((e,t)=>r(51128)("./".concat(e,"/").concat(t,".json")))).init({...(0,d.Ay)(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]});let u="https://translatewiki.net/wiki/Special:Translate?group=wikimedia-tools-campwiz-frontend&action=translate&filter=!translated&utm_source=CampWizFrontend&utm_campaign=CampWizFrontend&utm_medium=translatewiki&utm_content=CampWizFrontend&utm_term=CampWizFrontend"},8686:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var s=r(95155),n=r(68788),a=r(12115),l=r(55857),o=r(29716),i=r(78679),d=r(12422),c=r(62966),u=r(85558),x=r(98035),h=r(84605);let j=e=>{let{campaignId:t,isArchived:r,campaignName:j}=e,[f,m]=a.useState(!1),[p,v]=a.useState(!1),[g,b]=a.useState(null),A=async()=>{try{v(!0);let e=await (0,n.A)("/campaign/".concat(t,"/status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isArchived:!r})});if(!e)return;if("detail"in e)return void console.error(e.detail);setTimeout(()=>window.location.reload(),100),m(!1),b(null)}catch(e){console.error(e),b("An error occurred while archiving/unarchiving the campaign.")}finally{v(!1),m(!1)}};return f?(0,s.jsxs)(o.A,{open:f,onClose:()=>m(!1),children:[(0,s.jsxs)(c.A,{children:[r?"Unarchive":"Archive"," Campaign"]}),(0,s.jsxs)(d.A,{children:["Are you sure you want to ",r?"unarchive":"archive",' the campaign "',j,'"?',g&&(0,s.jsx)("p",{style:{color:"red"},children:g})]}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(l.default,{onClick:()=>m(!1),color:"success",disabled:p,sx:{m:1,borderRadius:1,px:2},size:"large",variant:"contained",children:"Cancel"}),(0,s.jsx)(h.default,{onClick:A,color:"primary",disabled:p,loading:p,sx:{m:1,borderRadius:4,px:2},size:"large",variant:"outlined",startIcon:r?(0,s.jsx)(x.A,{}):(0,s.jsx)(u.default,{}),smallIcon:r?(0,s.jsx)(x.A,{}):(0,s.jsx)(u.default,{}),label:r?"Unarchive":"Archive"})]})]}):(0,s.jsx)(h.default,{variant:"outlined",color:r?"success":"error",onClick:()=>m(!0),disabled:p,sx:{m:1,borderRadius:1,px:2},loading:p,smallIcon:r?(0,s.jsx)(x.A,{}):(0,s.jsx)(u.default,{}),startIcon:r?(0,s.jsx)(x.A,{}):(0,s.jsx)(u.default,{}),label:r?"Unarchive":"Archive"})}},11087:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(95155),n=r(89175);let a=e=>{let{src:t,loop:r=!0,marginTop:a}=e;return(0,s.jsx)("div",{style:{maxWidth:"500px",margin:"auto",width:"99%",marginTop:a},children:(0,s.jsx)(n.GL,{src:t,loop:r,autoplay:!0})})}},13719:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={src:"/_next/static/media/logo.0626e2b9.svg",height:768,width:1366,blurWidth:0,blurHeight:0}},23547:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(68788);let n=async(e,t)=>await (0,s.A)("/round/distribute/".concat(e),{method:"POST",body:JSON.stringify({juries:t})})},24431:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(95155),n=r(11087),a=r(66766);let l={src:"/_next/static/media/distributing.dcc5e05e.svg"};var o=r(12115);let i=e=>{let{taskId:t,onSuccess:r}=e,[i,d]=(0,o.useState)("pending");return(0,o.useEffect)(()=>{if(!t)return;let e=new EventSource("/task/".concat(t));return e.addEventListener("task",t=>{let s=JSON.parse(t.data);d(s.status),"error"==s.status&&e.close(),"success"==s.status&&(console.log("Task completed",s),e.close(),r(s))}),e.onerror=()=>{console.error("Error connecting to SSE server."),d("error"),e.close()},()=>{e.close()}},[r,t]),(0,s.jsxs)(s.Fragment,{children:["pending"==i&&(0,s.jsx)(a.default,{src:l.src,alt:"distributing",width:200,height:200}),"success"==i&&(0,s.jsx)(n.default,{src:"/lottie/success.lottie"}),"error"==i&&(0,s.jsx)(n.default,{src:"/lottie/error.lottie"})]})}},35337:(e,t,r)=>{"use strict";r.d(t,{DhashboardButton:()=>m,LogoutButtton:()=>p});var s=r(95155),n=r(42861),a=r(44146),l=r(55857),o=r(28132),i=r(6874),d=r.n(i),c=r(43654),u=r(68788);let x=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=await (0,u.A)("/user/logout",{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual"});if(t){if("detail"in t)return void console.error(t.detail);e?window.location.reload():t.data.redirect&&(window.location.href=t.data.redirect)}};var h=r(12115),j=r(35695),f=r(3824);let m=e=>{let{projectId:t,canAccessOtherProject:r}=e,{t:i}=(0,f.B)(),c=(0,n.A)(e=>e.breakpoints.down("sm")),u={bgcolor:"#006699",color:"#fff",borderRadius:30,transition:"0.3s",m:1,"&:hover":{bgcolor:"#00557d",transform:"scale(1.05)"}};return(0,s.jsx)(d(),{href:r?"/project/":"/project/".concat(t),children:c?(0,s.jsx)(a.A,{sx:u,children:(0,s.jsx)(o.A,{})}):(0,s.jsx)(l.default,{variant:"contained",startIcon:(0,s.jsx)(o.A,{}),sx:u,children:c?null:i("home.dashboard")})})},p=e=>{let{hiddenIn:t,refresh:r=!1}=e,{t:o}=(0,f.B)(),i=(0,n.A)(e=>e.breakpoints.down("sm")),d=(0,j.usePathname)(),u={borderRadius:30,m:1},[m,p]=(0,h.useState)(!1),v=async()=>{p(!0),await x(r),p(!1),console.log("Logged out",r)};if(t){for(let e of t)if(new RegExp(e).test(d))return null}return i?(0,s.jsx)(a.A,{sx:u,onClick:v,disabled:m,color:"error",loading:m,children:(0,s.jsx)(c.A,{})}):(0,s.jsx)(l.default,{variant:"contained",startIcon:(0,s.jsx)(c.A,{}),onClick:v,disabled:m,loading:m,color:"error",sx:u,children:!i&&o("home.logout")})}},39565:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var s=r(95155),n=r(55857),a=r(84635),l=r(44146),o=r(35695),i=r(42861),d=r(6874),c=r.n(d);let u=e=>{let{onClick:t,isSmall:r,alwaysBig:o,sx:i,disabled:d}=e;return!r||o?(0,s.jsx)(n.default,{onClick:t,variant:"text",color:"primary",startIcon:(0,s.jsx)(a.A,{}),sx:i,disabled:d,children:!r&&"Return"}):(0,s.jsx)(l.A,{disabled:d,sx:{m:.5,cursor:"pointer",display:"inline-block",...i||{},zIndex:20},onClick:t,color:"primary",className:"absolute left-4 z-20 m-1",children:(0,s.jsx)(a.A,{})})},x=e=>{let{disabled:t,sx:r,hiddenIn:n,alwaysBig:a=!1,to:l}=e,d=(0,o.usePathname)(),x=(0,i.A)(e=>e.breakpoints.down("sm"));if(n){for(let e of n)if(new RegExp(e).test(d))return null}return l?(0,s.jsx)(c(),{href:l,children:(0,s.jsx)(u,{isSmall:x,alwaysBig:a,sx:r,disabled:t})}):(0,s.jsx)(u,{onClick:()=>{l?window.location.replace(l):window.history.back()},isSmall:x,alwaysBig:a,sx:r,disabled:t})}},47269:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(95155),n=r(29716),a=r(62966),l=r(12422),o=r(78679),i=r(55857),d=r(12115),c=r(89702);let u=e=>{let{round:t,onClose:r,distribute:u}=e,[x,h]=(0,d.useState)(!1);return(0,s.jsxs)(n.A,{open:!0,onClose:r,children:[(0,s.jsx)(a.A,{children:"Import from Commons"}),(0,s.jsx)(l.A,{children:(0,s.jsx)(c.A,{roundId:t.roundId,importing:x,setImporting:h,afterImport:u})}),(0,s.jsx)(o.A,{children:(0,s.jsx)(i.default,{onClick:r,variant:"outlined",color:"error",disabled:x,loading:x,children:"Close Dialog"})})]})}},48403:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});var s=function(e){return e.PENDING="PENDING",e.IMPORTING="IMPORTING",e.DISTRIBUTING="DISTRIBUTING",e.EVALUATING="EVALUATING",e.REJECTED="REJECTED",e.CANCELLED="CANCELLED",e.PAUSED="PAUSED",e.SCHEDULED="SCHEDULED",e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e.ARCHIVED="ARCHIVED",e}({})},50412:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var s=r(95155),n=r(66766),a=r(13719),l=r(39565),o=r(35337),i=r(6874),d=r.n(i),c=r(3824),u=r(42861),x=r(89915),h=r(44146),j=r(55857),f=r(3605),m=r(12115);let p=(0,m.lazy)(()=>Promise.all([r.e(6318),r.e(9566),r.e(5396),r.e(3268),r.e(9694)]).then(r.bind(r,39694))),v=()=>{let[e,t]=(0,m.useState)(!1),r=(0,u.A)(e=>e.breakpoints.down("sm")),{t:n}=(0,c.B)(),a={borderRadius:30,m:1};return(0,s.jsxs)(m.Suspense,{fallback:(0,s.jsx)(x.A,{size:24,sx:{m:1}}),children:[r?(0,s.jsx)(h.A,{sx:a,onClick:()=>t(!0),children:(0,s.jsx)(f.default,{})}):(0,s.jsx)(j.default,{variant:"contained",onClick:()=>t(!0),startIcon:(0,s.jsx)(f.default,{}),sx:a,children:n("settings.title")}),e&&(0,s.jsx)(p,{onClose:()=>t(!1)})]})};var g=r(26363);window.Sentry=g;let b=e=>{let{returnTo:t}=e;return(0,s.jsxs)("header",{className:"flex items-center justify-between w-full h-auto px-4 text-center",children:[(0,s.jsx)(l.A,{hiddenIn:["^/$","^/user/login$"],to:t}),(0,s.jsx)(d(),{href:"/",style:{margin:"auto",display:"inline-block"},children:(0,s.jsx)(n.default,{src:a.A,alt:"Logo of CampWiz",height:75,style:{margin:"auto"},priority:!0})}),(0,s.jsx)(v,{}),(0,s.jsx)(o.LogoutButtton,{hiddenIn:["^/$","^/user/login$"]})]})}},51128:(e,t,r)=>{var s={"./ar/translation.json":[1881,1881],"./bn/translation.json":[79114,9114],"./de/translation.json":[36813,9194],"./en/translation.json":[18769,8769],"./es/translation.json":[12406,2406],"./hi/translation.json":[45429,5429],"./ja/translation.json":[18839,8839],"./kn/translation.json":[6443,6443],"./ml/translation.json":[45531,5531],"./mni/translation.json":[24706,4706],"./mr/translation.json":[99605,9605],"./or/translation.json":[84907,4907],"./pa/translation.json":[11077,1077],"./qqq/translation.json":[95897,5897],"./skr/translation.json":[63272,3272],"./ta/translation.json":[46137,6137],"./te/translation.json":[22973,2973],"./ur/translation.json":[38205,8205],"./zh/translation.json":[81032,1032]};function n(e){if(!r.o(s,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=s[e],n=t[0];return r.e(t[1]).then(()=>r.t(n,19))}n.keys=()=>Object.keys(s),n.id=51128,e.exports=n},59569:(e,t,r)=>{"use strict";r.d(t,{default:()=>ew});var s=r(95155),n=r(66655),a=r(96801),l=r(9670),o=r(12115),i=r(29721);let d=e=>{let{deadline:t}=e,[r,n]=(0,o.useMemo)(()=>{let e=new Date(t),r=new Date,s=e.getTime()-r.getTime();if(s<0)return[e,"Deadline passed"];let n=Math.floor(s/2592e6);if(n>0)return[e,"In ".concat(n," months")];let a=Math.floor(s/6048e5);if(a>0)return[e,"In ".concat(a," weeks")];let l=Math.floor(s/864e5);if(l>0)return[e,"In ".concat(l," days")];let o=Math.floor(s/36e5);if(o>0)return[e,"In ".concat(o," hours")];let i=Math.floor(s/6e4);if(i>0)return[e,"In ".concat(i," minutes")];let d=Math.floor(s/1e3);return[e,"In ".concat(d," seconds")]},[t]);return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"left"},children:[(0,s.jsx)(i.default,{sx:{display:"inline-block",mr:1},fontSize:"large"}),(0,s.jsxs)("div",{style:{display:"inline-block"},children:[(0,s.jsx)(l.default,{variant:"h6",sx:{mb:0},component:"div",children:"Deadline"}),(0,s.jsxs)(l.default,{variant:"body1",sx:{mb:2,mt:-.5},component:"div",children:[r.toDateString()," ",(0,s.jsxs)(l.default,{variant:"body1",color:"textSecondary",sx:{display:"inline"},children:["(",n,")"]})]})]})]})};var c=r(61786);let u=e=>{let{description:t,label:r="Guidelines",Icon:n=c.default}=e;return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"left"},children:[(0,s.jsx)(n,{sx:{display:"inline-block",mr:1},fontSize:"large"}),(0,s.jsxs)("div",{style:{display:"inline-block"},children:[(0,s.jsx)(l.default,{variant:"h6",sx:{mb:0},component:"div",children:r}),(0,s.jsx)(l.default,{variant:"body1",sx:{mb:2,mt:-.5,overflowWrap:"anywhere",textWrap:"balance",wordWrap:"break-word"},component:"div",children:t})]})]})};var x=r(45156);let h=e=>{let{quorum:t}=e;return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"left"},children:[(0,s.jsx)(x.A,{sx:{display:"inline-block",mr:1},fontSize:"large"}),(0,s.jsxs)("div",{style:{display:"inline-block"},children:[(0,s.jsx)(l.default,{variant:"h6",sx:{mb:0},component:"div",children:"Quorum"}),(0,s.jsxs)(l.default,{variant:"body1",sx:{mb:2,mt:-.5},component:"div",children:[t," jury per submission is required"]})]})]})};var j=r(10948),f=r(99679),m=r(94971),p=r(55857),v=r(29716),g=r(62966),b=r(12422),A=r(25949),y=r(72137),C=r(3967),I=r(33470),S=r(57236),k=r(78679),E=r(4759),w=r(79608),R=r(9415);let D={src:"/_next/static/media/Sparkle.39bd789f.svg"},T=[(0,s.jsx)(R.A,{sx:{color:"gold"}},0),(0,s.jsx)(R.A,{sx:{color:"silver"}},1),(0,s.jsx)(R.A,{sx:{color:"#cd7f32"}},2)],L=e=>{let{juryList:t}=e,[r,n]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.default,{variant:"outlined",color:"primary",startIcon:(0,s.jsx)(E.A,{}),disabled:0==t.length||r,onClick:()=>{n(!0)},sx:{borderRadius:3},children:"LeaderBoard"}),r&&(0,s.jsxs)(v.A,{open:r,onClose:()=>n(!1),fullWidth:!0,maxWidth:"lg",children:[(0,s.jsx)(g.A,{children:"LeaderBoard"}),(0,s.jsx)(b.A,{children:(0,s.jsxs)(A.A,{children:[(0,s.jsx)(y.A,{children:(0,s.jsxs)(C.A,{children:[(0,s.jsx)(I.A,{children:"Rank"}),(0,s.jsx)(I.A,{children:"Username"}),(0,s.jsx)(I.A,{children:"Total Evaluations"})]})}),(0,s.jsx)(S.A,{children:t.toSorted((e,t)=>t.totalEvaluated-e.totalEvaluated).map((e,t)=>(0,s.jsxs)(C.A,{sx:{backgroundImage:0==t?"url(".concat(D.src,")"):"none",backgroundPositionX:"left",backgroundRepeat:"no-repeat"},children:[(0,s.jsxs)(I.A,{children:[t+1,t<T.length&&T[t]]}),(0,s.jsx)(I.A,{children:e.username}),(0,s.jsx)(I.A,{children:e.totalEvaluated})]},e.roleId))})]})}),(0,s.jsx)(k.A,{children:(0,s.jsx)(p.default,{variant:"outlined",color:"error",onClick:()=>{n(!1)},startIcon:(0,s.jsx)(w.A,{}),children:"Close"})})]})]})},O=e=>{let{jury:t}=e,r=t.totalAssigned>0?Math.floor(t.totalEvaluated/t.totalAssigned*100):0;return(0,s.jsxs)(a.default,{sx:{padding:3,margin:1,border:"1px solid #e0e0e0",borderRadius:7,position:"relative",width:{xs:"100%",sm:"calc(50% - 20px)",md:"calc(33% - 20px)",lg:"calc(25% - 20px)",xl:"calc(20% - 20px)"}},children:[(0,s.jsxs)(l.default,{variant:"h6",sx:{mb:0},component:"div",children:[(0,s.jsx)(m.A,{sx:{display:"inline-block",mr:1},fontSize:"large"}),t.username]}),(0,s.jsxs)(l.default,{variant:"h4",sx:{mb:2,mt:1,textAlign:"center"},component:"div",children:[r,"%"]}),(0,s.jsxs)(l.default,{variant:"body1",sx:{mb:2,mt:-.5},component:"div",children:[t.totalAssigned," assigned"]}),(0,s.jsxs)(l.default,{variant:"body1",sx:{mb:2,mt:-.5},component:"div",children:[t.totalEvaluated," evaluated"]})]})},P=e=>{let{juryList:t,isPublicJury:r}=e;return r?(0,s.jsx)(L,{juryList:t}):(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"left",position:"relative",width:"100%"},children:[(0,s.jsx)(f.A,{sx:{display:"inline-block",mr:1},fontSize:"large"}),(0,s.jsxs)("div",{style:{width:"100%"},children:[(0,s.jsx)(l.default,{variant:"h6",sx:{mb:0},component:"div",children:"Jury"}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"left",flexWrap:"wrap",width:"100%"},children:t.map((e,t)=>(0,s.jsx)(O,{jury:e},t))})]})]})};var N=r(44445),z=r(43711),M=r(55521),U=r(51161),H=r(89915),F=r(60689),B=r(19169);let _=function(e){var t;return(0,s.jsxs)("div",{style:{position:"relative",display:"inline-flex",margin:"10px"},children:[(0,s.jsx)(H.A,{variant:"determinate",...e}),(0,s.jsx)("div",{style:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(l.default,{variant:null!=(t=e.labelVariant)?t:"h4",component:"div",color:e.color,children:"".concat(Math.round(e.value),"%")})})]})};var W=r(29158);let G=e=>{let{round:t,onClose:r}=e,{data:n,isLoading:a,error:l}=(0,B.Ay)("/round/".concat(t.roundId,"/results/summary"),F.A,{revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateOnMount:!0});return(0,s.jsxs)(v.A,{open:!0,onClose:r,fullWidth:!0,children:[(0,s.jsx)(g.A,{children:"Round Summary"}),(0,s.jsxs)(b.A,{children:[a&&(0,s.jsx)(H.A,{size:24}),l&&(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",l.message]}),n&&!a&&!l&&("details"in n?(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",n.details]}):(0,s.jsxs)(A.A,{children:[(0,s.jsx)("caption",{children:"* If there is two '0‘ (zero ) is mentioned on the Average Score column, the last zero means Unevaluated Submissions"}),(0,s.jsx)(y.A,{children:(0,s.jsxs)(C.A,{children:[(0,s.jsxs)(I.A,{children:["Average Score",(0,s.jsx)("b",{className:"font-bold",children:"*"})]}),(0,s.jsx)(I.A,{children:"Submission Count"})]})}),(0,s.jsx)(S.A,{children:n.data.map((e,t)=>(0,s.jsxs)(C.A,{children:[(0,s.jsx)(I.A,{children:e.averageScore}),(0,s.jsx)(I.A,{children:e.submissionCount})]},t))})]}))]}),(0,s.jsx)(k.A,{children:(0,s.jsx)(p.default,{onClick:r,variant:"outlined",color:"error",disabled:a,startIcon:(0,s.jsx)(w.A,{}),children:"Close Dialog"})})]})},V=e=>{let{c:t}=e,[r,n]=(0,o.useState)(!1),{totalSubmissions:a,totalEvaluatedSubmissions:l}=t,i=a>0?Math.floor(l/a*100):0;return(0,s.jsxs)("div",{className:"round-progress flex flex-col items-center",children:[(0,s.jsx)(_,{value:i,size:"10em",color:"success"}),(0,s.jsx)("br",{}),(0,s.jsx)(p.default,{variant:"contained",onClick:()=>n(!0),color:"success",size:"large",sx:{borderRadius:2,px:2,my:"auto"},startIcon:(0,s.jsx)(W.A,{}),children:"Summary"}),r&&(0,s.jsx)(G,{round:t,onClose:()=>n(!1)})]})},J=e=>{switch(e){case n.F.BINARY:return(0,s.jsx)(u,{description:"Yes/No",label:"Type",Icon:N.A});case n.F.RANKING:return(0,s.jsx)(u,{description:"Ranking",label:"Type",Icon:z.A});case n.F.SCORE:return(0,s.jsx)(u,{description:"Rating",label:"Type",Icon:M.A});default:return(0,s.jsx)(u,{description:"Unknown, contact us",label:"Type",Icon:U.A})}},q=e=>{let{round:t,t:r}=e,[n]=(0,o.useMemo)(()=>{if(!t.jury||!t.roles)return[[],0,0];let e=t.jury,r=0,s=0,n=[];for(let a of t.roles){let t=e[a.userId];t&&n.push({...a,username:t}),r+=a.totalAssigned,s+=a.totalEvaluated}return[n,r,s]},[t]);return(0,s.jsxs)(a.default,{sx:{textAlign:"left",mx:"auto",display:"inline-block",minWidth:300,width:"100%",p:2,border:1,borderColor:"primary.main",borderRadius:6},children:[(0,s.jsxs)(a.default,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row-reverse"},alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(V,{c:t}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d,{deadline:t.endDate}),J(t.type),(0,s.jsx)(u,{description:t.description}),(0,s.jsx)(u,{description:r("round.evaluatedOutOf",{total:t.totalSubmissions,evaluated:t.totalEvaluatedSubmissions}),label:r("round.submissions"),Icon:j.A}),!t.isPublicJury&&(0,s.jsx)(u,{description:r("round.evaluatedOutOf",{total:t.totalAssignments,evaluated:t.totalEvaluatedAssignments}),label:r("round.assignments"),Icon:j.A}),(0,s.jsx)(h,{quorum:t.quorum})]})]}),(0,s.jsx)(P,{juryList:n,isPublicJury:t.isPublicJury})]})};var Y=r(82326),$=r(89429),K=r(57706),Q=r(49471),X=r(2395),Z=r(6874),ee=r.n(Z),et=r(1384),er=r(77655),es=r(48403),en=r(15843),ea=r(67363),el=function(e){return e.creating="creating",e.importing="importing",e.finalizing="finalizing",e.editing="editing",e.distributing="distributing",e.none="",e}(el||{}),eo=r(70084);let ei=e=>{let{roundId:t}=e,[r,n]=o.useState(!1),[a,l]=o.useState(null),i=async()=>{try{n(!0);let e=await fetch("/round/".concat(t,"/results/csv"),{headers:{"Content-Type":"text/csv",Accept:"text/csv","Access-Control-Allow-Origin":"*"},method:"GET",credentials:"include"}),r=await e.blob(),s=window.URL.createObjectURL(r),a=document.createElement("a");a.download="round - ".concat(t,".csv"),a.href=s,a.click(),window.URL.revokeObjectURL(s),e.ok?console.log("Exported"):console.error("Failed to export")}catch(e){console.error(e),l(e.message)}finally{n(!1)}};return(0,s.jsx)(p.default,{startIcon:(0,s.jsx)(eo.A,{}),variant:a?"outlined":"contained",color:a?"error":"success",onClick:i,sx:{m:1,px:3},loading:r,disabled:r,children:"Download Results as CSV"})};var ed=r(34477);let ec=(0,ed.createServerReference)("7f88aaf1eead49706cfda4b28c26e5f0f6825113f7",ed.callServer,void 0,ed.findSourceMapURL,"updateroundStatus");var eu=r(7433);let ex=e=>{let{roundId:t,onClick:r,status:n,label:a,color:i,description:d,icon:c,refresh:u,statusText:x}=e,[h,j]=o.useState(!1),[f,m]=o.useState(!1),A=async()=>{try{m(!0);let e=await ec(t,n);if(e&&console.log("Round status updated"),"detail"in e)throw console.error(e.detail),Error(e.detail);j(!1),r&&r(e.data),u&&u()}catch(e){console.error(e)}finally{m(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.default,{startIcon:c,variant:"contained",color:i,onClick:()=>j(!0),sx:{m:1,px:3,borderRadius:7},loading:f,disabled:h,children:a}),(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(eu.default,{}),children:h&&(0,s.jsxs)(v.A,{open:h,onClose:()=>j(!1),children:[(0,s.jsx)(g.A,{children:a}),(0,s.jsxs)(b.A,{children:[(0,s.jsxs)(l.default,{children:["Are you sure you want to mark this round as ",x||n,"?"]}),(0,s.jsx)(l.default,{children:d}),f&&(0,s.jsx)(eu.default,{})]}),(0,s.jsxs)(k.A,{children:[(0,s.jsx)(p.default,{onClick:()=>j(!1),variant:"outlined",color:"error",disabled:f,children:"No"}),(0,s.jsx)(p.default,{onClick:A,variant:"contained",color:"success",disabled:f,loading:f,children:"Yes"})]})]})})]})};var eh=r(71023);let ej=(0,ed.createServerReference)("40d3ca75fbcbc3de53d73a8a78886586127b236488",ed.callServer,void 0,ed.findSourceMapURL,"default"),ef=e=>{let{roundId:t,refresh:r}=e,[n,a]=o.useState(!1),[i,d]=o.useState(!1),c=async()=>{try{d(!0);let e=await ej(t);if(e&&console.log("Round status updated"),"detail"in e)throw console.error(e.detail),Error(e.detail);a(!1),r()}catch(e){console.error(e)}finally{d(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.default,{startIcon:(0,s.jsx)(eh.A,{}),variant:"outlined",color:"error",onClick:()=>a(!0),sx:{m:1,px:3,borderRadius:7},loading:i,disabled:n,children:"Delete"}),(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(eu.default,{}),children:n&&(0,s.jsxs)(v.A,{open:n,onClose:()=>a(!1),children:[(0,s.jsx)(g.A,{children:"Delete Round"}),(0,s.jsxs)(b.A,{children:[(0,s.jsx)(l.default,{children:"Are you sure you want to delete this round?"}),(0,s.jsx)(l.default,{children:"Deleting this round will remove all the data associated with it. This includes all the submissions, evaluations, jury members and other data. This action is irreversible. So, please make sure you want to delete this round."}),i&&(0,s.jsx)(eu.default,{})]}),(0,s.jsxs)(k.A,{children:[(0,s.jsx)(p.default,{onClick:()=>a(!1),variant:"contained",color:"success",disabled:i,children:"No"}),(0,s.jsx)(p.default,{onClick:c,variant:"outlined",color:"error",disabled:i,loading:i,children:"Yes"})]})]})})]})};var em=r(69220);let ep=async e=>await (0,em._)("/round/".concat(e,"/addMyselfAsPublicJury"),{method:"POST"}),ev=e=>{let{roundId:t,refresh:r}=e,[n,a]=(0,o.useState)(!1),l=async()=>{try{a(!0);let e=await ep(t);if(e&&console.log("Added as jury"),"detail"in e)throw console.error(e.detail),Error(e.detail);r()}finally{a(!1)}};return(0,s.jsx)(p.default,{startIcon:(0,s.jsx)(en.default,{}),variant:"contained",color:"success",disabled:n,loading:n,onClick:l,sx:{m:1,px:3,borderRadius:3},children:"Add myself as jury"})},eg=e=>{let{onClick:t}=e;return(0,s.jsx)(p.default,{startIcon:(0,s.jsx)(en.default,{}),variant:"contained",color:"primary",onClick:t,sx:{m:1,px:3,borderRadius:3},children:"Create Round"})},eb=e=>{let{onClick:t}=e;return(0,s.jsx)(p.default,{startIcon:(0,s.jsx)(et.A,{}),variant:"contained",color:"primary",onClick:t,sx:{m:1,px:3},children:"Edit Round"})},eA=e=>{let{latestRound:t,setAction:r,refresh:n}=e;if(!t||![es.H.ACTIVE,es.H.PAUSED].includes(t.status))return null;if(t.status===es.H.PAUSED)return(0,s.jsx)(ex,{roundId:t.roundId,color:"success",description:"",icon:(0,s.jsx)(X.A,{}),label:"Mark as complete",status:es.H.COMPLETED,statusText:"Completed",onClick:()=>r(el.finalizing),refresh:n});let a=async e=>{r(el.finalizing),await ec(e.roundId,es.H.COMPLETED),r(el.finalizing),n()};return(0,s.jsx)(ex,{roundId:t.roundId,color:"success",description:"",icon:(0,s.jsx)(X.A,{}),label:"Mark as complete",status:es.H.PAUSED,statusText:"paused then Completed",onClick:a})},ey=e=>{let{latestRound:t,setAction:r,isJury:n,judgableLink:a,refresh:l,isCoordinator:i}=e,d=[];return t&&t.status===es.H.ACTIVE&&(n?d.push((0,s.jsx)(ee(),{href:a,children:(0,s.jsx)(p.default,{startIcon:(0,s.jsx)(er.A,{}),variant:"contained",color:"primary",sx:{m:1,px:3,borderRadius:3},children:"Evaluation Area"})})):t.isPublicJury&&d.push((0,s.jsx)(ev,{roundId:t.roundId,refresh:l}))),i&&(t?(t.status!==es.H.COMPLETED&&t.totalSubmissions===t.totalEvaluatedSubmissions&&d.push((0,s.jsx)(eA,{latestRound:t,setAction:r,refresh:l})),t.status===es.H.COMPLETED?(d.push((0,s.jsx)(ei,{roundId:t.roundId})),d.push((0,s.jsx)(eg,{onClick:()=>r(el.creating)}))):t.status===es.H.ACTIVE?d.push((0,s.jsx)(ex,{roundId:t.roundId,color:"error",description:"",icon:(0,s.jsx)(K.A,{}),label:"Pause",status:es.H.PAUSED,onClick:()=>r(el.finalizing),refresh:l})):t.status===es.H.PAUSED&&(d.push((0,s.jsx)(ef,{roundId:t.roundId,refresh:l})),0==t.totalSubmissions&&d.push((0,s.jsx)(p.default,{startIcon:(0,s.jsx)(ea.A,{}),variant:"contained",color:"primary",onClick:()=>r(el.importing),sx:{m:1,px:3},children:"Import"})),d.push((0,s.jsx)(eb,{onClick:()=>r(el.editing)})),d.push((0,s.jsx)(ex,{roundId:t.roundId,color:"error",description:"",icon:(0,s.jsx)(Q.A,{}),label:"Start",status:es.H.ACTIVE,onClick:()=>r(el.finalizing),refresh:l})))):d.push((0,s.jsx)(eg,{onClick:()=>r(el.creating)}))),(0,s.jsx)("div",{style:{textAlign:"right"},children:d.map((e,t)=>(0,s.jsx)(o.Fragment,{children:e},t))})};var eC=r(47269),eI=r(2028),eS=r(3824);let ek=o.lazy(()=>Promise.all([r.e(681),r.e(9602)]).then(r.bind(r,89602))),eE=o.lazy(()=>Promise.all([r.e(681),r.e(5687)]).then(r.bind(r,45687))),ew=function(e){var t;let{rounds:r,campaign:n,session:i,isCoordinator:d,isArchived:c}=e;r=null!=(t=null==r?void 0:r.toSorted((e,t)=>t.roundId.localeCompare(e.roundId)))?t:[];let u=()=>{window.location.reload()},{t:x}=(0,eS.B)(),[h,j]=o.useState(r.length>0?r[0]:null),f=null!==h&&null!==h.jury&&null!==i&&Object.values(h.jury).includes(i.username),[m,p]=o.useState(el.none);return(0,s.jsxs)(a.default,{sx:{ml:1},component:"div",children:[!c&&(0,s.jsx)(ey,{latestRound:h,campaign:n,action:m,setAction:p,isJury:f,judgableLink:"/round/".concat(null==h?void 0:h.roundId,"/submission/evaluate"),refresh:u,isCoordinator:d}),(0,s.jsxs)(o.Suspense,{fallback:(0,s.jsx)(eu.default,{}),children:[m===el.creating&&(0,s.jsx)(ek,{campaignId:n.campaignId,onAfterCreationSuccess:e=>{j(e)},onClose:()=>{p(el.none),u()}}),h&&m===el.editing&&(0,s.jsx)(eE,{campaignId:n.campaignId,onAfterCreationSuccess:e=>{j(e),r[0]=e},onClose:()=>{p(el.none),u()},existingRound:h}),h&&m===el.importing&&((null==h?void 0:h.dependsOnRoundId)?(0,s.jsx)($.A,{round:h,distribute:()=>{h.isPublicJury?(p(el.none),u()):p(el.distributing)},onClose:()=>{p(el.none),u()}}):(0,s.jsx)(eC.A,{round:h,distribute:()=>{h.isPublicJury?(p(el.none),u()):p(el.distributing)},onClose:()=>{p(el.none),u()}})),h&&m===el.distributing&&(0,s.jsx)(eI.A,{roundId:h.roundId,juries:Object.values(h.jury||{}),afterDistribution:()=>{p(el.none),u()},onClose:()=>{p(el.none),u()}})]}),r.map((e,t)=>(0,s.jsxs)("div",{id:"roundTimeline"+t,children:[(0,s.jsxs)("div",{style:{textAlign:"left"},children:[(0,s.jsx)(Y.oh,{status:e.status})," ",(0,s.jsx)(Y.Ay,{status:e.status,t:x}),(0,s.jsx)(l.default,{variant:"h6",sx:{display:"inline"},children:e.name}),(0,s.jsxs)(l.default,{variant:"subtitle1",sx:{display:"inline",color:"text.secondary"},children:["\xa0(",e.roundId,")"]})]}),(0,s.jsx)(a.default,{sx:{borderLeft:{xs:0,sm:1},pl:{xs:0,sm:2},pr:{xs:0,sm:2},my:2,borderLeftColor:"".concat((0,Y.qY)(e.status),".main")},children:(0,s.jsx)(q,{round:e,t:x})},t)]},t))]})}},60689:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(69220);let n=async e=>{let t=await (0,s._)(e);if("data"in t){let{data:e}=t,r=0;for(let t=0;t<e.length;t++)r+=e[t].submissionCount,e[t].cumulative=r;t.data=e}return t}},65106:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,Ok:()=>a,eo:()=>s});let s=["en","bn","hi","mr","ta","kn","ml"],n="translation",a="i18next";function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{supportedLngs:s,fallbackLng:"en",lng:e,fallbackNS:n,defaultNS:n,ns:t}}},66655:(e,t,r)=>{"use strict";r.d(t,{F:()=>n,z:()=>s});var s=function(e){return e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.IMAGE="BITMAP",e.ARTICLE="ARTICLE",e.DRAWING="DRAWING",e}({}),n=function(e){return e.BINARY="binary",e.RANKING="ranking",e.SCORE="score",e}({})},68788:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(34477);let n=(0,s.createServerReference)("7fdadbeee5140d04dc8643d8360b13e3285fc0fc6d",s.callServer,void 0,s.findSourceMapURL,"default")},69220:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var s=r(34477);let n=(0,s.createServerReference)("6070dc5bab919eb75a74cd481130eea0e7254e4903",s.callServer,void 0,s.findSourceMapURL,"fetchAPIFromBackendListWithErrorHandling")},82326:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>j,oh:()=>h,qY:()=>x});var s=r(95155),n=r(48403),a=r(99203),l=r(26348),o=r(20071),i=r(57706),d=r(12173),c=r(2395),u=r(46443);let x=e=>{switch(e){case n.H.COMPLETED:return"success";case n.H.CANCELLED:return"error";case n.H.EVALUATING:return"info";case n.H.PAUSED:case n.H.PENDING:return"warning";case n.H.ACTIVE:return"success";default:return"primary"}},h=e=>{let{status:t}=e,r={sx:{display:"inline",ml:-2,mr:1}};switch(t){case n.H.COMPLETED:return(0,s.jsx)(c.A,{color:x(t),...r});case n.H.CANCELLED:return(0,s.jsx)(u.A,{color:x(t),...r});case n.H.EVALUATING:return(0,s.jsx)(l.A,{color:x(t),...r});case n.H.PAUSED:return(0,s.jsx)(i.A,{color:x(t),...r});case n.H.PENDING:return(0,s.jsx)(a.A,{color:x(t),...r});case n.H.ACTIVE:return(0,s.jsx)(d.A,{color:x(t),...r});default:return(0,s.jsx)(l.A,{color:x(t),...r})}},j=e=>{let{status:t,t:r}=e,n=r?r("round.status.".concat(t)):t;return(0,s.jsx)(o.default,{label:n,color:x(t),variant:"outlined",sx:{marginRight:1,p:1}})}},84317:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(95155),n=r(1384),a=r(84605);let l=e=>{let{campaignId:t}=e;return(0,s.jsx)(a.default,{label:"Edit",link:"/campaign/".concat(t,"/edit"),startIcon:(0,s.jsx)(n.A,{}),variant:"outlined",color:"primary",sx:{borderRadius:3}})}},84605:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(95155),n=r(42861),a=r(55857),l=r(44146),o=r(6874),i=r.n(o);let d=e=>{let{link:t,endIcon:r,startIcon:o,label:d,onClick:c,disabled:u=!1,loading:x=!1,size:h="medium",variant:j="contained",color:f="primary",sx:m,className:p,alwaysBig:v=!1,smallIcon:g}=e,b=(0,n.A)(e=>e.breakpoints.down("sm"));return t?(0,s.jsx)(i(),{href:t,children:v||!b?(0,s.jsx)(a.default,{variant:j,color:f,size:h,startIcon:o,endIcon:r,onClick:c,disabled:u||x,sx:{...m||{},cursor:x?"not-allowed":"pointer"},className:p,children:d}):(0,s.jsx)(l.A,{disabled:u||x,sx:{...m||{},cursor:x?"not-allowed":"pointer"},className:p,color:f,onClick:c,children:g||o||r})}):v||!b?(0,s.jsx)(a.default,{variant:j,color:f,size:h,startIcon:o,endIcon:r,onClick:c,disabled:u||x,sx:{...m||{},cursor:x?"not-allowed":"pointer"},className:p,children:d}):(0,s.jsx)(l.A,{disabled:u||x,sx:{...m||{},cursor:x?"not-allowed":"pointer"},className:p,onClick:c,color:f,children:g||o||r})}},89429:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var s=r(95155),n=r(29716),a=r(62966),l=r(12422),o=r(78679),i=r(55857),d=r(12115),c=r(34477);let u=(0,c.createServerReference)("7fa76616522a1cb8cf888475f85d3d0d89e41c1afa",c.callServer,void 0,c.findSourceMapURL,"default");var x=r(11087);let h=e=>{let{taskId:t,onSuccess:r}=e,[n,a]=(0,d.useState)("pending");return(0,d.useEffect)(()=>{if(!t)return;let e=new EventSource("/task/".concat(t));return console.log("Connecting to SSE server.",e),e.addEventListener("task",t=>{let s=JSON.parse(t.data);a(s.status),"error"==s.status&&e.close(),"success"==s.status&&(console.log("Task completed",s),e.close(),r(s))}),e.onerror=()=>{console.error("Error connecting to SSE server."),a("error"),e.close()},()=>{e.close()}},[r,t]),(0,s.jsxs)(s.Fragment,{children:["pending"==n&&(0,s.jsx)(x.default,{src:"/lottie/importing.lottie"}),"success"==n&&(0,s.jsx)(x.default,{src:"/lottie/success.lottie"}),"error"==n&&(0,s.jsx)(x.default,{src:"/lottie/error.lottie"})]})};var j=r(19169),f=r(93669),m=r(41892),p=r(75396),v=r(7433),g=r(60689),b=r(18981),A=r(94189);let y=(0,s.jsx)(b.A,{fontSize:"small"}),C=(0,s.jsx)(A.A,{fontSize:"small"});function I(e){let{resultSummary:t,scores:r,setScores:n}=e,a=t.toSorted((e,t)=>e.averageScore-t.averageScore).map(e=>({title:"".concat(e.averageScore,"% (").concat(e.submissionCount," files)"),value:e.averageScore.toString()}));return(0,s.jsx)(f.A,{multiple:!0,id:"checkboxes-tags-demo",options:a,disableCloseOnSelect:!0,value:Array.from(r).map(e=>a.find(t=>t.value===e)||{title:e,value:e}),onChange:(e,t)=>{n(new Set(t.map(e=>e.value)))},isOptionEqualToValue:(e,t)=>e.value===t.value,getOptionLabel:e=>e.value,renderOption:(e,t,r)=>{let{selected:n}=r,{key:a,...l}=e;return(0,s.jsxs)("li",{...l,children:[(0,s.jsx)(m.A,{icon:y,checkedIcon:C,style:{marginRight:8},checked:n}),t.title]},a)},sx:{m:1},fullWidth:!0,renderInput:e=>(0,s.jsx)(p.A,{...e,label:"Select Scores to Import",placeholder:"Select scores to import",fullWidth:!0})})}let S=e=>{let{currentRound:t,importing:r,setImporting:n,distribute:a}=e,[l,o]=(0,d.useState)(""),[c,f]=(0,d.useState)(new Set),{data:m,isLoading:p}=(0,j.Ay)("/round/".concat(t.dependsOnRoundId,"/results/summary"),g.A,{revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateOnMount:!0}),b=async(e,r)=>{try{if(!r)throw Error("No round to import from");n(!0);let s=await u(t.roundId,r,e);if("detail"in s)throw Error(s.detail);o(s.data.taskId)}catch(e){console.error(e)}finally{n(!1)}};if(p)return(0,s.jsx)(v.default,{});if(!m)return(0,s.jsx)("div",{children:"Failed to load summary"});if("detail"in m)return(0,s.jsx)("div",{children:m.detail});let A=m.data;return l?(0,s.jsx)(h,{taskId:l,onSuccess:a}):(0,s.jsx)(d.Suspense,{fallback:(0,s.jsx)(x.default,{src:"/lottie/importing.lottie"}),children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[0===A.length?(0,s.jsx)("div",{children:"No submissions to import"}):(0,s.jsx)(I,{resultSummary:A,scores:c,setScores:f}),(0,s.jsx)(i.default,{onClick:()=>b(Array.from(c),t.dependsOnRoundId),disabled:r||0===c.size,loading:r,variant:"contained",color:"primary",children:"Import"})]})})},k=e=>{let{round:t,onClose:r,distribute:c}=e,[u,x]=(0,d.useState)(!1);return(0,s.jsxs)(n.A,{open:!0,onClose:r,children:[(0,s.jsx)(a.A,{children:"Import from the previous round"}),(0,s.jsx)(l.A,{children:(0,s.jsx)(S,{currentRound:t,importing:u,setImporting:x,distribute:c})}),(0,s.jsx)(o.A,{children:(0,s.jsx)(i.default,{onClick:r,variant:"outlined",color:"error",disabled:u,loading:u,children:"Close Dialog"})})]})}},89702:(e,t,r)=>{"use strict";r.d(t,{t:()=>D,A:()=>T});var s=r(95155),n=r(12115),a=r(34477);let l=(0,a.createServerReference)("7f2992652aadd87978cc889dcf9508e96af4ee0b2d",a.callServer,void 0,a.findSourceMapURL,"default");var o=r(11087),i=r(20071);let d=e=>{let{taskId:t,onSuccess:r}=e,[a,l]=(0,n.useState)("pending"),[d,c]=(0,n.useState)(0),[u,x]=(0,n.useState)(0);return(0,n.useEffect)(()=>{if(!t)return;let e=new EventSource("/task/".concat(t));return console.log("Connecting to SSE server.",e),e.addEventListener("task",t=>{let s=JSON.parse(t.data);l(s.status),c(s.successCount),x(s.failedCount),"error"==s.status&&e.close(),"success"==s.status&&(console.log("Task completed",s),e.close(),r(s))}),e.onerror=()=>{console.error("Error connecting to SSE server."),l("error"),e.close()},()=>{e.close()}},[r,t]),(0,s.jsxs)(s.Fragment,{children:["pending"==a&&(0,s.jsx)(o.default,{src:"/lottie/importing.lottie"}),"success"==a&&(0,s.jsx)(o.default,{src:"/lottie/success.lottie"}),"error"==a&&(0,s.jsx)(o.default,{src:"/lottie/error.lottie"}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-around",children:[(0,s.jsx)(i.default,{label:"Success: ".concat(d),color:"success"}),(0,s.jsx)(i.default,{label:"Failed: ".concat(u),color:"error"})]})]})};var c=r(93669),u=r(75396),x=r(95439),h=r(14995),j=r(44146),f=r(34152),m=r(55857),p=r(89915);let v={src:"/_next/static/media/commons2server.0033afc3.svg"};var g=r(66766),b=r(19169),A=r(77782);let y=e=>(0,s.jsx)(A.A,{...e,children:(0,s.jsx)("path",{d:"M12,3C8.59,3 5.69,4.07 4.54,5.57L9.79,10.82C10.5,10.93 11.22,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M3.92,7.08L2.5,8.5L5,11H0V13H5L2.5,15.5L3.92,16.92L8.84,12M20,9C20,11.21 16.42,13 12,13C11.34,13 10.7,12.95 10.09,12.87L7.62,15.34C8.88,15.75 10.38,16 12,16C16.42,16 20,14.21 20,12M20,14C20,16.21 16.42,18 12,18C9.72,18 7.67,17.5 6.21,16.75L4.53,18.43C5.68,19.93 8.59,21 12,21C16.42,21 20,19.21 20,17"})});var C=r(71023);let I=e=>{let{alreadyIncludedCategories:t,onSave:r,saving:a=!1}=e,[l,o]=(0,n.useState)(new Set(t)),i=[...l].sort(),[d,A]=(0,n.useState)(""),I=d.replace(/^ *[Cc]ategory *:/i,""),{data:S,isLoading:k,error:E}=(0,b.Ay)(I?"https://commons.wikimedia.org/w/api.php?action=query&format=json&list=allcategories&formatversion=2&acprefix=".concat(I,"&origin=*&aclimit=10&acprop=size"):null,async e=>{let t=await fetch(e);return(await t.json()).query.allcategories.map(e=>e.category)});return(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(g.default,{src:v.src,alt:"Import from Commons Representational Image",width:400,height:186,style:{margin:1,display:"block",textAlign:"center"}}),E&&(0,s.jsx)("div",{children:"Failed to load"}),(0,s.jsx)(c.A,{id:"categories",options:S||[],filterSelectedOptions:!0,value:"",onError:e=>console.error(e),disabled:a,loading:k,onChange:(e,t)=>{t&&o(new Set(l.add(t))),A("")},renderInput:e=>(0,s.jsx)(u.A,{...e,variant:"outlined",label:"Categories (Without Category: Prefix)",placeholder:"Categories",value:d,onChange:e=>A(e.target.value.trim().replace(/^[Cc]ategory:/,"")),disabled:a,helperText:"Type a category name to search (Without Category: Prefix)"})}),(0,s.jsx)(x.A,{children:i.map((e,t)=>(0,s.jsx)(h.Ay,{secondaryAction:(0,s.jsx)(j.A,{onClick:()=>o(new Set(i.filter(t=>t!==e))),color:"error",disabled:a,children:(0,s.jsx)(C.A,{})}),sx:{border:1,borderColor:"grey.300",borderRadius:5,margin:1,backgroundColor:"#00669926"},children:(0,s.jsx)(f.A,{primary:e})},t))}),(0,s.jsxs)(m.default,{startIcon:(0,s.jsx)(y,{}),variant:"contained",onClick:()=>r(i),disabled:0===i.length||a,children:[a&&(0,s.jsx)(p.A,{size:20,color:"inherit",sx:{display:a?"inline-block":"none"}}),"Import"]})]})};var S=r(29716),k=r(62966),E=r(12422),w=r(9670),R=r(78679);let D=e=>{let{onClose:t,round:r,task:n}=e;return(0,s.jsxs)(S.A,{open:!0,onClose:t,children:[(0,s.jsx)(k.A,{children:"Import successful"}),(0,s.jsxs)(E.A,{children:[(0,s.jsxs)("p",{children:["Importing from ",r.name," was successful."]}),(0,s.jsxs)("p",{children:["Task ID: ",n.taskId]}),(0,s.jsxs)(w.default,{variant:"body1",gutterBottom:!0,children:["Total Imported Submissions: ",n.successCount]}),(0,s.jsxs)(w.default,{variant:"body1",gutterBottom:!0,children:["Total Failed Submissions: ",n.failedCount]}),"object"==typeof n.failedIds&&(0,s.jsxs)(w.default,{variant:"body1",gutterBottom:!0,children:["Following files have been skipped:",(0,s.jsx)("ul",{children:Object.keys(n.failedIds).map(e=>(0,s.jsxs)("li",{children:[e," - ",n.failedIds[e]]},e))})]})]}),(0,s.jsx)(R.A,{children:(0,s.jsx)(m.default,{onClick:t,variant:"outlined",color:"error",children:"Close Dialog"})})]})},T=e=>{let{roundId:t,importing:r,setImporting:a,afterImport:i}=e,[c,u]=(0,n.useState)(""),x=async e=>{try{a(!0);let r=await l(t,e);if("detail"in r)throw Error(r.detail);u(r.data.taskId)}catch(e){console.error(e)}finally{a(!1)}};return c?(0,s.jsx)(d,{taskId:c,onSuccess:i}):(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(o.default,{src:"/lottie/importing.lottie"}),children:(0,s.jsx)(I,{onSave:x,alreadyIncludedCategories:[],saving:r})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8429,6454,6766,9978,225,7638,6318,9958,71,9566,5396,9169,7433,6813,3669,6978,5944,4850,8441,4133,7358],()=>t(3635)),_N_E=e.O()}]);